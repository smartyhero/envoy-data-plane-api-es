// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/quic/connection_id_generator/quic_lb/v3/quic_lb.proto (package envoy.extensions.quic.connection_id_generator.quic_lb.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { DataSource } from "../../../../../config/core/v3/base_pb";
import type { SdsSecretConfig } from "../../../../transport_sockets/tls/v3/secret_pb";

/**
 * Describes the file envoy/extensions/quic/connection_id_generator/quic_lb/v3/quic_lb.proto.
 */
export declare const file_envoy_extensions_quic_connection_id_generator_quic_lb_v3_quic_lb: GenFile;

/**
 * Configuration for a connection ID generator implementation for the QUIC-LB draft RFC for
 * routable connection IDs.
 *
 * Connection IDs always have the length self encoded, as described in
 * https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers#name-length-self-description.
 *
 * See https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers for details.
 *
 * .. warning::
 *
 *    This is still a work in progress. Interoperability testing has not yet been performed.
 * [#next-free-field: 7]
 *
 * @generated from message envoy.extensions.quic.connection_id_generator.quic_lb.v3.Config
 */
export declare type Config = Message<"envoy.extensions.quic.connection_id_generator.quic_lb.v3.Config"> & {
  /**
   * Must be at least 1 octet.
   * The length of server_id and nonce_length_bytes must be 18 or less.
   * See https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers#name-server-id-allocation.
   *
   * @generated from field: envoy.config.core.v3.DataSource server_id = 2;
   */
  serverId?: DataSource;

  /**
   * If true, indicates that the :ref:`server_id
   * <envoy_v3_api_field_extensions.quic.connection_id_generator.quic_lb.v3.Config.server_id>` is base64 encoded.
   *
   * This can be useful if the ID may contain binary data and must be transmitted as a string, for example in
   * an environment variable.
   *
   * @generated from field: bool server_id_base64_encoded = 6;
   */
  serverIdBase64Encoded: boolean;

  /**
   * Optional validation of the expected server ID length. If this is non-zero and the value in ``server_id``
   * does not have a matching length, a configuration error is generated. This can be useful for validating
   * that the server ID is valid.
   *
   * @generated from field: uint32 expected_server_id_length = 3;
   */
  expectedServerIdLength: number;

  /**
   * The nonce length must be at least 4 bytes.
   * The length of server_id and nonce_length_bytes must be 18 bytes or less.
   *
   * @generated from field: uint32 nonce_length_bytes = 4;
   */
  nonceLengthBytes: number;

  /**
   * Configuration to fetch the encryption key and configuration version.
   *
   * The SDS service is for a :ref:`GenericSecret <envoy_v3_api_msg_extensions.transport_sockets.tls.v3.GenericSecret>`.
   * The data should populate :ref:`secrets <envoy_v3_api_field_extensions.transport_sockets.tls.v3.GenericSecret.secrets>`:
   *
   * "encryption_key" must contain the 16 byte encryption key.
   *
   * "configuration_version" must contain a 1 byte unsigned integer of value less than 7.
   * See https://datatracker.ietf.org/doc/html/draft-ietf-quic-load-balancers#name-config-rotation.
   *
   * @generated from field: envoy.extensions.transport_sockets.tls.v3.SdsSecretConfig encryption_parameters = 5;
   */
  encryptionParameters?: SdsSecretConfig;

  /**
   * Use the unencrypted mode. This is useful for testing or a simplified implementation of the
   * downstream load balancer, but allows for linking different CIDs for the same connection, and
   * leaks information about the valid server IDs in use. This mode does not comply with the RFC.
   *
   * Note that in this mode, :ref:`encryption_parameters
   * <envoy_v3_api_field_extensions.quic.connection_id_generator.quic_lb.v3.Config.encryption_parameters>`
   * is still required because it contains ``configuration_version``, which is still
   * needed. ``encryption_key`` can be set to ``inline_string: '0000000000000000'``.
   *
   * @generated from field: bool unencrypted_mode = 1;
   */
  unencryptedMode: boolean;
};

/**
 * Describes the message envoy.extensions.quic.connection_id_generator.quic_lb.v3.Config.
 * Use `create(ConfigSchema)` to create a new message.
 */
export declare const ConfigSchema: GenMessage<Config>;

