// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/access_loggers/fluentd/v3/fluentd.proto (package envoy.extensions.access_loggers.fluentd.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { JsonObject, Message } from "@bufbuild/protobuf";
import type { Duration } from "@bufbuild/protobuf/wkt";
import type { TypedExtensionConfig } from "../../../../config/core/v3/extension_pb";
import type { BackoffStrategy } from "../../../../config/core/v3/backoff_pb";

/**
 * Describes the file envoy/extensions/access_loggers/fluentd/v3/fluentd.proto.
 */
export declare const file_envoy_extensions_access_loggers_fluentd_v3_fluentd: GenFile;

/**
 * Configuration for the *envoy.access_loggers.fluentd* :ref:`AccessLog <envoy_v3_api_msg_config.accesslog.v3.AccessLog>`.
 * This access log extension will send the emitted access logs over a TCP connection to an upstream that is accepting
 * the Fluentd Forward Protocol as described in: `Fluentd Forward Protocol Specification
 * <https://github.com/fluent/fluentd/wiki/Forward-Protocol-Specification-v1>`_.
 * [#extension: envoy.access_loggers.fluentd]
 * [#next-free-field: 9]
 *
 * @generated from message envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig
 */
export declare type FluentdAccessLogConfig = Message<"envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig"> & {
  /**
   * The upstream cluster to connect to for streaming the Fluentd messages.
   *
   * @generated from field: string cluster = 1;
   */
  cluster: string;

  /**
   * A tag is a string separated with '.' (e.g. log.type) to categorize events.
   * See: https://github.com/fluent/fluentd/wiki/Forward-Protocol-Specification-v1#message-modes
   *
   * @generated from field: string tag = 2;
   */
  tag: string;

  /**
   * The prefix to use when emitting :ref:`statistics <config_access_log_stats>`.
   *
   * @generated from field: string stat_prefix = 3;
   */
  statPrefix: string;

  /**
   * Interval for flushing access logs to the TCP stream. Logger will flush requests every time
   * this interval is elapsed, or when batch size limit is hit, whichever comes first. Defaults to
   * 1 second.
   *
   * @generated from field: google.protobuf.Duration buffer_flush_interval = 4;
   */
  bufferFlushInterval?: Duration;

  /**
   * Soft size limit in bytes for access log entries buffer. The logger will buffer requests until
   * this limit it hit, or every time flush interval is elapsed, whichever comes first. When the buffer
   * limit is hit, the logger will immediately flush the buffer contents. Setting it to zero effectively
   * disables the batching. Defaults to 16384.
   *
   * @generated from field: google.protobuf.UInt32Value buffer_size_bytes = 5;
   */
  bufferSizeBytes?: number;

  /**
   * A struct that represents the record that is sent for each log entry.
   * https://github.com/fluent/fluentd/wiki/Forward-Protocol-Specification-v1#entry
   * Values are rendered as strings, numbers, or boolean values as appropriate.
   * Nested JSON objects may be produced by some command operators (e.g. FILTER_STATE or DYNAMIC_METADATA).
   * See :ref:`format string<config_access_log_format_strings>` documentation for a specific command operator details.
   *
   * .. validated-code-block:: yaml
   *   :type-name: envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig
   *
   *   record:
   *     status: "%RESPONSE_CODE%"
   *     message: "%LOCAL_REPLY_BODY%"
   *
   * The following msgpack record would be created:
   *
   * .. code-block:: json
   *
   *  {
   *    "status": 500,
   *    "message": "My error message"
   *  }
   *
   * @generated from field: google.protobuf.Struct record = 6;
   */
  record?: JsonObject;

  /**
   * Optional retry, in case upstream connection has failed. If this field is not set, the default values will be applied,
   * as specified in the :ref:`RetryOptions <envoy_v3_api_msg_extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.RetryOptions>`
   * configuration.
   *
   * @generated from field: envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.RetryOptions retry_options = 7;
   */
  retryOptions?: FluentdAccessLogConfig_RetryOptions;

  /**
   * Specifies a collection of Formatter plugins that can be called from the access log configuration.
   * See the formatters extensions documentation for details.
   * [#extension-category: envoy.formatter]
   *
   * @generated from field: repeated envoy.config.core.v3.TypedExtensionConfig formatters = 8;
   */
  formatters: TypedExtensionConfig[];
};

/**
 * Describes the message envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.
 * Use `create(FluentdAccessLogConfigSchema)` to create a new message.
 */
export declare const FluentdAccessLogConfigSchema: GenMessage<FluentdAccessLogConfig>;

/**
 * @generated from message envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.RetryOptions
 */
export declare type FluentdAccessLogConfig_RetryOptions = Message<"envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.RetryOptions"> & {
  /**
   * The number of times the logger will attempt to connect to the upstream during reconnects.
   * By default, there is no limit. The logger will attempt to reconnect to the upstream each time
   * connecting to the upstream failed or the upstream connection had been closed for any reason.
   *
   * @generated from field: google.protobuf.UInt32Value max_connect_attempts = 1;
   */
  maxConnectAttempts?: number;

  /**
   * Sets the backoff strategy. If this value is not set, the default base backoff interval is 500
   * milliseconds and the default max backoff interval is 5 seconds (10 times the base interval).
   *
   * @generated from field: envoy.config.core.v3.BackoffStrategy backoff_options = 2;
   */
  backoffOptions?: BackoffStrategy;
};

/**
 * Describes the message envoy.extensions.access_loggers.fluentd.v3.FluentdAccessLogConfig.RetryOptions.
 * Use `create(FluentdAccessLogConfig_RetryOptionsSchema)` to create a new message.
 */
export declare const FluentdAccessLogConfig_RetryOptionsSchema: GenMessage<FluentdAccessLogConfig_RetryOptions>;

