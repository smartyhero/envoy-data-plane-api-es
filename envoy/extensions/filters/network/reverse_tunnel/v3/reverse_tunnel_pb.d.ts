// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/network/reverse_tunnel/v3/reverse_tunnel.proto (package envoy.extensions.filters.network.reverse_tunnel.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { Duration } from "@bufbuild/protobuf/wkt";
import type { RequestMethod } from "../../../../../config/core/v3/base_pb";

/**
 * Describes the file envoy/extensions/filters/network/reverse_tunnel/v3/reverse_tunnel.proto.
 */
export declare const file_envoy_extensions_filters_network_reverse_tunnel_v3_reverse_tunnel: GenFile;

/**
 * Validation configuration for reverse tunnel identifiers.
 * Validates the node ID and cluster ID extracted from reverse tunnel handshake headers
 * against expected values specified using format strings.
 *
 * @generated from message envoy.extensions.filters.network.reverse_tunnel.v3.Validation
 */
export declare type Validation = Message<"envoy.extensions.filters.network.reverse_tunnel.v3.Validation"> & {
  /**
   * Format string to extract the expected node identifier for validation.
   * The formatted value is compared against the ``x-envoy-reverse-tunnel-node-id`` header
   * from the incoming handshake request. If they do not match, the connection is rejected
   * with HTTP ``403 Forbidden``.
   *
   * Supports Envoy's :ref:`command operators <config_access_log_command_operators>`:
   *
   * * ``%DYNAMIC_METADATA(namespace:key)%``: Extract expected value from dynamic metadata.
   * * ``%FILTER_STATE(key)%``: Extract expected value from filter state.
   * * ``%DOWNSTREAM_REMOTE_ADDRESS%``: Use downstream connection IP address.
   * * Plain strings: Use a static expected value.
   *
   * If empty, node ID validation is skipped.
   *
   * Example using dynamic metadata allowlist:
   *
   * .. code-block:: yaml
   *
   *    node_id_format: "%DYNAMIC_METADATA(envoy.reverse_tunnel.allowlist:expected_node_id)%"
   *
   *
   * @generated from field: string node_id_format = 1;
   */
  nodeIdFormat: string;

  /**
   * Format string to extract the expected cluster identifier for validation.
   * The formatted value is compared against the ``x-envoy-reverse-tunnel-cluster-id`` header
   * from the incoming handshake request. If they do not match, the connection is rejected
   * with HTTP ``403 Forbidden``.
   *
   * Supports the same :ref:`command operators <config_access_log_command_operators>` as
   * ``node_id_format``.
   *
   * If empty, cluster ID validation is skipped.
   *
   * Example using filter state:
   *
   * .. code-block:: yaml
   *
   *    cluster_id_format: "%FILTER_STATE(expected_cluster_id)%"
   *
   *
   * @generated from field: string cluster_id_format = 2;
   */
  clusterIdFormat: string;

  /**
   * Whether to emit validation results as dynamic metadata.
   * When enabled, the filter emits metadata under the namespace specified by
   * ``dynamic_metadata_namespace`` containing:
   *
   * * ``node_id``: The actual node ID from the handshake request.
   * * ``cluster_id``: The actual cluster ID from the handshake request.
   * * ``validation_result``: Either ``allowed`` or ``denied``.
   *
   * This metadata can be used by subsequent filters or for access logging.
   * Defaults to ``false``.
   *
   * @generated from field: bool emit_dynamic_metadata = 3;
   */
  emitDynamicMetadata: boolean;

  /**
   * Namespace for emitted dynamic metadata when ``emit_dynamic_metadata`` is ``true``.
   * If not specified, defaults to ``envoy.filters.network.reverse_tunnel``.
   *
   * @generated from field: string dynamic_metadata_namespace = 4;
   */
  dynamicMetadataNamespace: string;
};

/**
 * Describes the message envoy.extensions.filters.network.reverse_tunnel.v3.Validation.
 * Use `create(ValidationSchema)` to create a new message.
 */
export declare const ValidationSchema: GenMessage<Validation>;

/**
 * Configuration for the reverse tunnel network filter.
 * This filter handles reverse tunnel connection acceptance and rejection by processing
 * HTTP requests where required identification values are provided via HTTP headers.
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.network.reverse_tunnel.v3.ReverseTunnel
 */
export declare type ReverseTunnel = Message<"envoy.extensions.filters.network.reverse_tunnel.v3.ReverseTunnel"> & {
  /**
   * Ping interval for health checks on established reverse tunnel connections.
   * If not specified, defaults to ``2 seconds``.
   *
   * @generated from field: google.protobuf.Duration ping_interval = 1;
   */
  pingInterval?: Duration;

  /**
   * Whether to automatically close connections after processing reverse tunnel requests.
   *
   * * When set to ``true``, connections are closed after acceptance or rejection.
   * * When set to ``false``, connections remain open for potential reuse.
   *
   * Defaults to ``false``.
   *
   * @generated from field: bool auto_close_connections = 2;
   */
  autoCloseConnections: boolean;

  /**
   * HTTP path to match for reverse tunnel requests.
   * If not specified, defaults to ``/reverse_connections/request``.
   *
   * @generated from field: string request_path = 3;
   */
  requestPath: string;

  /**
   * HTTP method to match for reverse tunnel requests.
   * If not specified (``METHOD_UNSPECIFIED``), this defaults to ``GET``.
   *
   * @generated from field: envoy.config.core.v3.RequestMethod request_method = 4;
   */
  requestMethod: RequestMethod;

  /**
   * Optional validation configuration for node and cluster identifiers.
   * If specified, the filter validates the ``x-envoy-reverse-tunnel-node-id`` and
   * ``x-envoy-reverse-tunnel-cluster-id`` headers against expected values extracted
   * using format strings. Requests that fail validation are rejected with HTTP ``403 Forbidden``.
   *
   * @generated from field: envoy.extensions.filters.network.reverse_tunnel.v3.Validation validation = 5;
   */
  validation?: Validation;
};

/**
 * Describes the message envoy.extensions.filters.network.reverse_tunnel.v3.ReverseTunnel.
 * Use `create(ReverseTunnelSchema)` to create a new message.
 */
export declare const ReverseTunnelSchema: GenMessage<ReverseTunnel>;

