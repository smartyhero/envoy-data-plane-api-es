// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/http/file_system_buffer/v3/file_system_buffer.proto (package envoy.extensions.filters.http.file_system_buffer.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { AsyncFileManagerConfig } from "../../../../common/async_files/v3/async_file_manager_pb";

/**
 * Describes the file envoy/extensions/filters/http/file_system_buffer/v3/file_system_buffer.proto.
 */
export declare const file_envoy_extensions_filters_http_file_system_buffer_v3_file_system_buffer: GenFile;

/**
 * The behavior of the filter for a stream.
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior
 */
export declare type BufferBehavior = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior"> & {
  /**
   * @generated from oneof envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.behavior
   */
  behavior: {
    /**
     * Don't inject ``content-length`` header.
     * Output immediately, buffer only if output is slower than input.
     *
     * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.StreamWhenPossible stream_when_possible = 1;
     */
    value: BufferBehavior_StreamWhenPossible;
    case: "streamWhenPossible";
  } | {
    /**
     * Never buffer, do nothing.
     *
     * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.Bypass bypass = 2;
     */
    value: BufferBehavior_Bypass;
    case: "bypass";
  } | {
    /**
     * If ``content-length`` is not present, buffer the entire input,
     * inject ``content-length`` header, then output.
     * If ``content-length`` is already present, act like ``stream_when_possible``.
     *
     * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.InjectContentLengthIfNecessary inject_content_length_if_necessary = 3;
     */
    value: BufferBehavior_InjectContentLengthIfNecessary;
    case: "injectContentLengthIfNecessary";
  } | {
    /**
     * Always buffer the entire input, and inject ``content-length``,
     * overwriting any provided content-length header.
     *
     * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBufferAndAlwaysInjectContentLength fully_buffer_and_always_inject_content_length = 4;
     */
    value: BufferBehavior_FullyBufferAndAlwaysInjectContentLength;
    case: "fullyBufferAndAlwaysInjectContentLength";
  } | {
    /**
     * Always buffer the entire input, do not modify ``content-length``.
     *
     * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBuffer fully_buffer = 5;
     */
    value: BufferBehavior_FullyBuffer;
    case: "fullyBuffer";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.
 * Use `create(BufferBehaviorSchema)` to create a new message.
 */
export declare const BufferBehaviorSchema: GenMessage<BufferBehavior>;

/**
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.StreamWhenPossible
 */
export declare type BufferBehavior_StreamWhenPossible = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.StreamWhenPossible"> & {
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.StreamWhenPossible.
 * Use `create(BufferBehavior_StreamWhenPossibleSchema)` to create a new message.
 */
export declare const BufferBehavior_StreamWhenPossibleSchema: GenMessage<BufferBehavior_StreamWhenPossible>;

/**
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.Bypass
 */
export declare type BufferBehavior_Bypass = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.Bypass"> & {
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.Bypass.
 * Use `create(BufferBehavior_BypassSchema)` to create a new message.
 */
export declare const BufferBehavior_BypassSchema: GenMessage<BufferBehavior_Bypass>;

/**
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.InjectContentLengthIfNecessary
 */
export declare type BufferBehavior_InjectContentLengthIfNecessary = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.InjectContentLengthIfNecessary"> & {
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.InjectContentLengthIfNecessary.
 * Use `create(BufferBehavior_InjectContentLengthIfNecessarySchema)` to create a new message.
 */
export declare const BufferBehavior_InjectContentLengthIfNecessarySchema: GenMessage<BufferBehavior_InjectContentLengthIfNecessary>;

/**
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBufferAndAlwaysInjectContentLength
 */
export declare type BufferBehavior_FullyBufferAndAlwaysInjectContentLength = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBufferAndAlwaysInjectContentLength"> & {
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBufferAndAlwaysInjectContentLength.
 * Use `create(BufferBehavior_FullyBufferAndAlwaysInjectContentLengthSchema)` to create a new message.
 */
export declare const BufferBehavior_FullyBufferAndAlwaysInjectContentLengthSchema: GenMessage<BufferBehavior_FullyBufferAndAlwaysInjectContentLength>;

/**
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBuffer
 */
export declare type BufferBehavior_FullyBuffer = Message<"envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBuffer"> & {
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior.FullyBuffer.
 * Use `create(BufferBehavior_FullyBufferSchema)` to create a new message.
 */
export declare const BufferBehavior_FullyBufferSchema: GenMessage<BufferBehavior_FullyBuffer>;

/**
 * The configuration for one direction of the filter behavior.
 *
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.StreamConfig
 */
export declare type StreamConfig = Message<"envoy.extensions.filters.http.file_system_buffer.v3.StreamConfig"> & {
  /**
   * Whether to bypass / stream / fully buffer / etc.
   * If unset in route, vhost and listener config, the default is ``stream_when_possible``.
   *
   * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.BufferBehavior behavior = 1;
   */
  behavior?: BufferBehavior;

  /**
   * The amount stored in the memory buffer before buffering to disk.
   * If unset in route, vhost and listener config, defaults to a hardcoded value of 1MiB
   *
   * @generated from field: google.protobuf.UInt64Value memory_buffer_bytes_limit = 2;
   */
  memoryBufferBytesLimit?: bigint;

  /**
   * The maximum storage (excluding memory) to be buffered in this filter.
   * If unset in route, vhost and listener config, defaults to a hardcoded value of 32MiB
   *
   * @generated from field: google.protobuf.UInt64Value storage_buffer_bytes_limit = 3;
   */
  storageBufferBytesLimit?: bigint;

  /**
   * The maximum amount that can be queued for writing to storage, above which the
   * source is requested to pause. If unset, defaults to the same value as
   * ``memory_buffer_bytes_limit``.
   *
   * For example, assuming the recipient is not consuming data at all, if
   * ``memory_buffer_bytes_limit`` was 32MiB, and ``storage_buffer_queue_high_watermark_bytes``
   * was 64MiB, and the filesystem is backed up so writes are not occurring promptly,
   * then:
   *
   * * Any request less than 32MiB will eventually pass through without ever attempting
   *   to write to disk.
   * * Any request with over 32MiB buffered will start trying to write to disk.
   *   If it reaches (32+64)MiB buffered in memory (write to disk isn't keeping up), a high
   *   watermark signal is sent to the source.
   * * Any stream whose total size exceeds
   *   ``memory_buffer_bytes_limit + storage_buffer_bytes_limit`` will provoke an error.
   *   (Note, if the recipient *is* consuming data then it is possible for such an
   *   oversized request to pass through the buffer filter, provided the recipient
   *   isn't consuming data too slowly.)
   *
   * The low watermark signal is sent when the memory buffer is at size
   * ``memory_buffer_bytes_limit + (storage_buffer_queue_high_watermark_bytes / 2)``.
   *
   * @generated from field: google.protobuf.UInt64Value storage_buffer_queue_high_watermark_bytes = 4;
   */
  storageBufferQueueHighWatermarkBytes?: bigint;
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.StreamConfig.
 * Use `create(StreamConfigSchema)` to create a new message.
 */
export declare const StreamConfigSchema: GenMessage<StreamConfig>;

/**
 * A :ref:`file system buffer <config_http_filters_file_system_buffer>` filter configuration.
 *
 * Route-specific configs override only the fields they explicitly include; unset
 * fields inherit from the vhost or listener-level config, or, if never set,
 * and not required, use a default value.
 *
 * @generated from message envoy.extensions.filters.http.file_system_buffer.v3.FileSystemBufferFilterConfig
 */
export declare type FileSystemBufferFilterConfig = Message<"envoy.extensions.filters.http.file_system_buffer.v3.FileSystemBufferFilterConfig"> & {
  /**
   * A configuration for an AsyncFileManager.
   *
   * If unset in route, vhost and listener, and the behavior is not ``bypass``
   * in both directions, an Internal Server Error response will be sent.
   *
   * @generated from field: envoy.extensions.common.async_files.v3.AsyncFileManagerConfig manager_config = 1;
   */
  managerConfig?: AsyncFileManagerConfig;

  /**
   * An optional path to which the unlinked files should be written - this may
   * determine which physical storage device will be used.
   *
   * If unset in route, vhost and listener, will use the environment variable
   * ``TMPDIR``, or, if that's also unset, will use ``/tmp``.
   *
   * @generated from field: google.protobuf.StringValue storage_buffer_path = 2;
   */
  storageBufferPath?: string;

  /**
   * Optional configuration for how to buffer (or not) requests.
   * If unset in route, vhost and listener, ``StreamConfig`` default values will be used
   * (with behavior ``stream_when_possible``)
   *
   * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.StreamConfig request = 3;
   */
  request?: StreamConfig;

  /**
   * Optional configuration for how to buffer (or not) responses.
   * If unset in route, vhost and listener, ``StreamConfig`` default values will be used
   * (with behavior ``stream_when_possible``)
   *
   * @generated from field: envoy.extensions.filters.http.file_system_buffer.v3.StreamConfig response = 4;
   */
  response?: StreamConfig;
};

/**
 * Describes the message envoy.extensions.filters.http.file_system_buffer.v3.FileSystemBufferFilterConfig.
 * Use `create(FileSystemBufferFilterConfigSchema)` to create a new message.
 */
export declare const FileSystemBufferFilterConfigSchema: GenMessage<FileSystemBufferFilterConfig>;

