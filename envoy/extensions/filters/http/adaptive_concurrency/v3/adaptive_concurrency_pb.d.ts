// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/http/adaptive_concurrency/v3/adaptive_concurrency.proto (package envoy.extensions.filters.http.adaptive_concurrency.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { Percent } from "../../../../../type/v3/percent_pb";
import type { Duration } from "@bufbuild/protobuf/wkt";
import type { RuntimeFeatureFlag } from "../../../../../config/core/v3/base_pb";
import type { HttpStatus } from "../../../../../type/v3/http_status_pb";

/**
 * Describes the file envoy/extensions/filters/http/adaptive_concurrency/v3/adaptive_concurrency.proto.
 */
export declare const file_envoy_extensions_filters_http_adaptive_concurrency_v3_adaptive_concurrency: GenFile;

/**
 * Configuration parameters for the gradient controller.
 *
 * @generated from message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig
 */
export declare type GradientControllerConfig = Message<"envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig"> & {
  /**
   * The percentile to use when summarizing aggregated samples. Defaults to p50.
   *
   * @generated from field: envoy.type.v3.Percent sample_aggregate_percentile = 1;
   */
  sampleAggregatePercentile?: Percent;

  /**
   * @generated from field: envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.ConcurrencyLimitCalculationParams concurrency_limit_params = 2;
   */
  concurrencyLimitParams?: GradientControllerConfig_ConcurrencyLimitCalculationParams;

  /**
   * @generated from field: envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.MinimumRTTCalculationParams min_rtt_calc_params = 3;
   */
  minRttCalcParams?: GradientControllerConfig_MinimumRTTCalculationParams;
};

/**
 * Describes the message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.
 * Use `create(GradientControllerConfigSchema)` to create a new message.
 */
export declare const GradientControllerConfigSchema: GenMessage<GradientControllerConfig>;

/**
 * Parameters controlling the periodic recalculation of the concurrency limit from sampled request
 * latencies.
 *
 * @generated from message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.ConcurrencyLimitCalculationParams
 */
export declare type GradientControllerConfig_ConcurrencyLimitCalculationParams = Message<"envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.ConcurrencyLimitCalculationParams"> & {
  /**
   * The allowed upper-bound on the calculated concurrency limit. Defaults to 1000.
   *
   * @generated from field: google.protobuf.UInt32Value max_concurrency_limit = 2;
   */
  maxConcurrencyLimit?: number;

  /**
   * The period of time samples are taken to recalculate the concurrency limit.
   *
   * @generated from field: google.protobuf.Duration concurrency_update_interval = 3;
   */
  concurrencyUpdateInterval?: Duration;
};

/**
 * Describes the message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.ConcurrencyLimitCalculationParams.
 * Use `create(GradientControllerConfig_ConcurrencyLimitCalculationParamsSchema)` to create a new message.
 */
export declare const GradientControllerConfig_ConcurrencyLimitCalculationParamsSchema: GenMessage<GradientControllerConfig_ConcurrencyLimitCalculationParams>;

/**
 * Parameters controlling the periodic minRTT recalculation.
 * [#next-free-field: 7]
 *
 * @generated from message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.MinimumRTTCalculationParams
 */
export declare type GradientControllerConfig_MinimumRTTCalculationParams = Message<"envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.MinimumRTTCalculationParams"> & {
  /**
   * The time interval between recalculating the minimum request round-trip time. Has to be
   * positive. If set to zero, dynamic sampling of the minRTT is disabled.
   *
   * @generated from field: google.protobuf.Duration interval = 1;
   */
  interval?: Duration;

  /**
   * The fixed value for the minRTT. This value is used when minRTT is not sampled dynamically.
   * If dynamic sampling of the minRTT is disabled, this field must be set.
   *
   * @generated from field: google.protobuf.Duration fixed_value = 6;
   */
  fixedValue?: Duration;

  /**
   * The number of requests to aggregate/sample during the minRTT recalculation window before
   * updating. Defaults to 50.
   *
   * @generated from field: google.protobuf.UInt32Value request_count = 2;
   */
  requestCount?: number;

  /**
   * Randomized time delta that will be introduced to the start of the minRTT calculation window.
   * This is represented as a percentage of the interval duration. Defaults to 15%.
   *
   * Example: If the interval is 10s and the jitter is 15%, the next window will begin
   * somewhere in the range (10s - 11.5s).
   *
   * @generated from field: envoy.type.v3.Percent jitter = 3;
   */
  jitter?: Percent;

  /**
   * The concurrency limit set while measuring the minRTT. Defaults to 3.
   *
   * @generated from field: google.protobuf.UInt32Value min_concurrency = 4;
   */
  minConcurrency?: number;

  /**
   * Amount added to the measured minRTT to add stability to the concurrency limit during natural
   * variability in latency. This is expressed as a percentage of the measured value and can be
   * adjusted to allow more or less tolerance to the sampled latency values.
   *
   * Defaults to 25%.
   *
   * @generated from field: envoy.type.v3.Percent buffer = 5;
   */
  buffer?: Percent;
};

/**
 * Describes the message envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig.MinimumRTTCalculationParams.
 * Use `create(GradientControllerConfig_MinimumRTTCalculationParamsSchema)` to create a new message.
 */
export declare const GradientControllerConfig_MinimumRTTCalculationParamsSchema: GenMessage<GradientControllerConfig_MinimumRTTCalculationParams>;

/**
 * @generated from message envoy.extensions.filters.http.adaptive_concurrency.v3.AdaptiveConcurrency
 */
export declare type AdaptiveConcurrency = Message<"envoy.extensions.filters.http.adaptive_concurrency.v3.AdaptiveConcurrency"> & {
  /**
   * @generated from oneof envoy.extensions.filters.http.adaptive_concurrency.v3.AdaptiveConcurrency.concurrency_controller_config
   */
  concurrencyControllerConfig: {
    /**
     * Gradient concurrency control will be used.
     *
     * @generated from field: envoy.extensions.filters.http.adaptive_concurrency.v3.GradientControllerConfig gradient_controller_config = 1;
     */
    value: GradientControllerConfig;
    case: "gradientControllerConfig";
  } | { case: undefined; value?: undefined };

  /**
   * If set to false, the adaptive concurrency filter will operate as a pass-through filter. If the
   * message is unspecified, the filter will be enabled.
   *
   * @generated from field: envoy.config.core.v3.RuntimeFeatureFlag enabled = 2;
   */
  enabled?: RuntimeFeatureFlag;

  /**
   * This field allows for a custom HTTP response status code to the downstream client when
   * the concurrency limit has been exceeded.
   * Defaults to 503 (Service Unavailable).
   *
   * .. note::
   *   If this is set to < 400, 503 will be used instead.
   *
   * @generated from field: envoy.type.v3.HttpStatus concurrency_limit_exceeded_status = 3;
   */
  concurrencyLimitExceededStatus?: HttpStatus;
};

/**
 * Describes the message envoy.extensions.filters.http.adaptive_concurrency.v3.AdaptiveConcurrency.
 * Use `create(AdaptiveConcurrencySchema)` to create a new message.
 */
export declare const AdaptiveConcurrencySchema: GenMessage<AdaptiveConcurrency>;

