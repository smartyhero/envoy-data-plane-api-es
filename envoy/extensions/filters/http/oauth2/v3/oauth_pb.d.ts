// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/http/oauth2/v3/oauth.proto (package envoy.extensions.filters.http.oauth2.v3, syntax proto3)
/* eslint-disable */

import type { GenEnum, GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { SdsSecretConfig } from "../../../../transport_sockets/tls/v3/secret_pb";
import type { HttpUri } from "../../../../../config/core/v3/http_uri_pb";
import type { RetryPolicy } from "../../../../../config/core/v3/base_pb";
import type { PathMatcher } from "../../../../../type/matcher/v3/path_pb";
import type { HeaderMatcher } from "../../../../../config/route/v3/route_components_pb";
import type { Duration } from "@bufbuild/protobuf/wkt";

/**
 * Describes the file envoy/extensions/filters/http/oauth2/v3/oauth.proto.
 */
export declare const file_envoy_extensions_filters_http_oauth2_v3_oauth: GenFile;

/**
 * OAuth cookie configuration attributes.
 *
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.CookieConfig
 */
export declare type CookieConfig = Message<"envoy.extensions.filters.http.oauth2.v3.CookieConfig"> & {
  /**
   * The value used for the SameSite cookie attribute.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig.SameSite same_site = 1;
   */
  sameSite: CookieConfig_SameSite;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.CookieConfig.
 * Use `create(CookieConfigSchema)` to create a new message.
 */
export declare const CookieConfigSchema: GenMessage<CookieConfig>;

/**
 * @generated from enum envoy.extensions.filters.http.oauth2.v3.CookieConfig.SameSite
 */
export enum CookieConfig_SameSite {
  /**
   * @generated from enum value: DISABLED = 0;
   */
  DISABLED = 0,

  /**
   * @generated from enum value: STRICT = 1;
   */
  STRICT = 1,

  /**
   * @generated from enum value: LAX = 2;
   */
  LAX = 2,

  /**
   * @generated from enum value: NONE = 3;
   */
  NONE = 3,
}

/**
 * Describes the enum envoy.extensions.filters.http.oauth2.v3.CookieConfig.SameSite.
 */
export declare const CookieConfig_SameSiteSchema: GenEnum<CookieConfig_SameSite>;

/**
 * [#next-free-field: 8]
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.CookieConfigs
 */
export declare type CookieConfigs = Message<"envoy.extensions.filters.http.oauth2.v3.CookieConfigs"> & {
  /**
   * Configuration for the bearer token cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig bearer_token_cookie_config = 1;
   */
  bearerTokenCookieConfig?: CookieConfig;

  /**
   * Configuration for the OAuth HMAC cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig oauth_hmac_cookie_config = 2;
   */
  oauthHmacCookieConfig?: CookieConfig;

  /**
   * Configuration for the OAuth expires cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig oauth_expires_cookie_config = 3;
   */
  oauthExpiresCookieConfig?: CookieConfig;

  /**
   * Configuration for the ID token cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig id_token_cookie_config = 4;
   */
  idTokenCookieConfig?: CookieConfig;

  /**
   * Configuration for the refresh token cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig refresh_token_cookie_config = 5;
   */
  refreshTokenCookieConfig?: CookieConfig;

  /**
   * Configuration for the OAuth nonce cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig oauth_nonce_cookie_config = 6;
   */
  oauthNonceCookieConfig?: CookieConfig;

  /**
   * Configuration for the code verifier cookie.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfig code_verifier_cookie_config = 7;
   */
  codeVerifierCookieConfig?: CookieConfig;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.CookieConfigs.
 * Use `create(CookieConfigsSchema)` to create a new message.
 */
export declare const CookieConfigsSchema: GenMessage<CookieConfigs>;

/**
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials
 */
export declare type OAuth2Credentials = Message<"envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials"> & {
  /**
   * The client_id to be used in the authorize calls. This value will be URL encoded when sent to the OAuth server.
   *
   * @generated from field: string client_id = 1;
   */
  clientId: string;

  /**
   * The secret used to retrieve the access token. This value will be URL encoded when sent to the OAuth server.
   *
   * @generated from field: envoy.extensions.transport_sockets.tls.v3.SdsSecretConfig token_secret = 2;
   */
  tokenSecret?: SdsSecretConfig;

  /**
   * Configures how the secret token should be created.
   *
   * @generated from oneof envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.token_formation
   */
  tokenFormation: {
    /**
     * If present, the secret token will be a HMAC using the provided secret.
     *
     * @generated from field: envoy.extensions.transport_sockets.tls.v3.SdsSecretConfig hmac_secret = 3;
     */
    value: SdsSecretConfig;
    case: "hmacSecret";
  } | { case: undefined; value?: undefined };

  /**
   * The cookie names used in OAuth filters flow.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.CookieNames cookie_names = 4;
   */
  cookieNames?: OAuth2Credentials_CookieNames;

  /**
   * The domain to set the cookie on. If not set, the cookie will default to the host of the request, not including the subdomains.
   * This is useful when token cookies need to be shared across multiple subdomains.
   *
   * @generated from field: string cookie_domain = 5;
   */
  cookieDomain: string;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.
 * Use `create(OAuth2CredentialsSchema)` to create a new message.
 */
export declare const OAuth2CredentialsSchema: GenMessage<OAuth2Credentials>;

/**
 * [#next-free-field: 8]
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.CookieNames
 */
export declare type OAuth2Credentials_CookieNames = Message<"envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.CookieNames"> & {
  /**
   * Cookie name to hold OAuth bearer token value. When the authentication server validates the
   * client and returns an authorization token back to the OAuth filter, no matter what format
   * that token is, if :ref:`forward_bearer_token <envoy_v3_api_field_extensions.filters.http.oauth2.v3.OAuth2Config.forward_bearer_token>`
   * is set to true the filter will send over the bearer token as a cookie with this name to the
   * upstream. Defaults to ``BearerToken``.
   *
   * @generated from field: string bearer_token = 1;
   */
  bearerToken: string;

  /**
   * Cookie name to hold OAuth HMAC value. Defaults to ``OauthHMAC``.
   *
   * @generated from field: string oauth_hmac = 2;
   */
  oauthHmac: string;

  /**
   * Cookie name to hold OAuth expiry value. Defaults to ``OauthExpires``.
   *
   * @generated from field: string oauth_expires = 3;
   */
  oauthExpires: string;

  /**
   * Cookie name to hold the id token. Defaults to ``IdToken``.
   *
   * @generated from field: string id_token = 4;
   */
  idToken: string;

  /**
   * Cookie name to hold the refresh token. Defaults to ``RefreshToken``.
   *
   * @generated from field: string refresh_token = 5;
   */
  refreshToken: string;

  /**
   * Cookie name to hold the nonce value. Defaults to ``OauthNonce``.
   *
   * @generated from field: string oauth_nonce = 6;
   */
  oauthNonce: string;

  /**
   * Cookie name to hold the PKCE code verifier. Defaults to ``OauthCodeVerifier``.
   *
   * @generated from field: string code_verifier = 7;
   */
  codeVerifier: string;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials.CookieNames.
 * Use `create(OAuth2Credentials_CookieNamesSchema)` to create a new message.
 */
export declare const OAuth2Credentials_CookieNamesSchema: GenMessage<OAuth2Credentials_CookieNames>;

/**
 * OAuth config
 *
 * [#next-free-field: 27]
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.OAuth2Config
 */
export declare type OAuth2Config = Message<"envoy.extensions.filters.http.oauth2.v3.OAuth2Config"> & {
  /**
   * Endpoint on the authorization server to retrieve the access token from.
   *
   * @generated from field: envoy.config.core.v3.HttpUri token_endpoint = 1;
   */
  tokenEndpoint?: HttpUri;

  /**
   * Specifies the retry policy for requests to the OAuth server. If not specified, then no retries will be performed.
   *
   * @generated from field: envoy.config.core.v3.RetryPolicy retry_policy = 18;
   */
  retryPolicy?: RetryPolicy;

  /**
   * The endpoint redirect to for authorization in response to unauthorized requests.
   *
   * @generated from field: string authorization_endpoint = 2;
   */
  authorizationEndpoint: string;

  /**
   * The endpoint at the authorization server to request the user be logged out of the Authorization server.
   * This field is optional and should be set only if openid is in the auth_scopes and the authorization server
   * supports the OpenID Connect RP-Initiated Logout specification.
   * For more information, see https://openid.net/specs/openid-connect-rpinitiated-1_0.html
   *
   * If configured, the OAuth2 filter will redirect users to this endpoint when they access the signout_path.
   *
   * @generated from field: string end_session_endpoint = 23;
   */
  endSessionEndpoint: string;

  /**
   * Credentials used for OAuth.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.OAuth2Credentials credentials = 3;
   */
  credentials?: OAuth2Credentials;

  /**
   * The redirect URI passed to the authorization endpoint. Supports header formatting
   * tokens. For more information, including details on header value syntax, see the
   * documentation on :ref:`custom request headers <config_http_conn_man_headers_custom_request_headers>`.
   *
   * This URI should not contain any query parameters.
   *
   * @generated from field: string redirect_uri = 4;
   */
  redirectUri: string;

  /**
   * Matching criteria used to determine whether a path appears to be the result of a redirect from the authorization server.
   *
   * @generated from field: envoy.type.matcher.v3.PathMatcher redirect_path_matcher = 5;
   */
  redirectPathMatcher?: PathMatcher;

  /**
   * The path to sign a user out, clearing their credential cookies.
   *
   * @generated from field: envoy.type.matcher.v3.PathMatcher signout_path = 6;
   */
  signoutPath?: PathMatcher;

  /**
   * Forward the OAuth token as a Bearer to upstream web service.
   *
   * @generated from field: bool forward_bearer_token = 7;
   */
  forwardBearerToken: boolean;

  /**
   * If set to true, preserve the existing authorization header.
   * By default the client strips the existing authorization header before forwarding upstream.
   * Can not be set to true if forward_bearer_token is already set to true.
   * Default value is false.
   *
   * @generated from field: bool preserve_authorization_header = 16;
   */
  preserveAuthorizationHeader: boolean;

  /**
   * Any request that matches any of the provided matchers will be passed through without OAuth validation.
   *
   * @generated from field: repeated envoy.config.route.v3.HeaderMatcher pass_through_matcher = 8;
   */
  passThroughMatcher: HeaderMatcher[];

  /**
   * Optional list of OAuth scopes to be claimed in the authorization request. If not specified,
   * defaults to "user" scope.
   * OAuth RFC https://tools.ietf.org/html/rfc6749#section-3.3
   *
   * @generated from field: repeated string auth_scopes = 9;
   */
  authScopes: string[];

  /**
   * Optional resource parameter for authorization request
   * RFC: https://tools.ietf.org/html/rfc8707
   *
   * @generated from field: repeated string resources = 10;
   */
  resources: string[];

  /**
   * Defines how ``client_id`` and ``client_secret`` are sent in OAuth client to OAuth server requests.
   * RFC https://datatracker.ietf.org/doc/html/rfc6749#section-2.3.1
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.OAuth2Config.AuthType auth_type = 11;
   */
  authType: OAuth2Config_AuthType;

  /**
   * If set to true, allows automatic access token refresh using the associated refresh token (see
   * `RFC 6749 section 6 <https://datatracker.ietf.org/doc/html/rfc6749#section-6>`_), provided that the OAuth server supports that.
   * Default value is true.
   *
   * @generated from field: google.protobuf.BoolValue use_refresh_token = 12;
   */
  useRefreshToken?: boolean;

  /**
   * The default lifetime in seconds of the access token, if omitted by the authorization server.
   *
   * If this value is not set, it will default to ``0s``. In this case, the expiry must be set by
   * the authorization server or the OAuth flow will fail.
   *
   * @generated from field: google.protobuf.Duration default_expires_in = 13;
   */
  defaultExpiresIn?: Duration;

  /**
   * Any request that matches any of the provided matchers won't be redirected to OAuth server when tokens are not valid.
   * Automatic access token refresh will be performed for these requests, if enabled.
   * This behavior can be useful for AJAX requests.
   *
   * @generated from field: repeated envoy.config.route.v3.HeaderMatcher deny_redirect_matcher = 14;
   */
  denyRedirectMatcher: HeaderMatcher[];

  /**
   * The default lifetime in seconds of the refresh token, if the exp (expiration time) claim is omitted in the refresh token or the refresh token is not JWT.
   *
   * If this value is not set, it will default to ``604800s``. In this case, the cookie with the refresh token will be expired
   * in a week.
   * This setting is only considered if ``use_refresh_token`` is set to true, otherwise the authorization server expiration or ``default_expires_in`` is used.
   *
   * @generated from field: google.protobuf.Duration default_refresh_token_expires_in = 15;
   */
  defaultRefreshTokenExpiresIn?: Duration;

  /**
   * If set to true, the client will not set a cookie for ID Token even if one is received from the Identity Provider. This may be useful in cases where the ID
   * Token is too large for HTTP cookies (longer than 4096 characters). Enabling this option will only disable setting the cookie response header, the filter
   * will still process incoming ID Tokens as part of the HMAC if they are there. This is to ensure compatibility while switching this setting on. Future
   * sessions would not set the IdToken cookie header.
   *
   * @generated from field: bool disable_id_token_set_cookie = 17;
   */
  disableIdTokenSetCookie: boolean;

  /**
   * If set to true, the client will not set a cookie for Access Token even if one is received from the Identity Provider.
   * Enabling this option will only disable setting the cookie response header, the filter
   * will still process incoming Access Tokens as part of the HMAC if they are there. This is to ensure compatibility while switching this setting on. Future
   * sessions would not set the Access Token cookie header.
   *
   * @generated from field: bool disable_access_token_set_cookie = 19;
   */
  disableAccessTokenSetCookie: boolean;

  /**
   * If set to true, the client will not set a cookie for Refresh Token even if one is received from the Identity Provider.
   * Enabling this option will only disable setting the cookie response header, the filter
   * will still process incoming Refresh Tokens as part of the HMAC if they are there. This is to ensure compatibility while switching this setting on. Future
   * sessions would not set the Refresh Token cookie header.
   *
   * @generated from field: bool disable_refresh_token_set_cookie = 20;
   */
  disableRefreshTokenSetCookie: boolean;

  /**
   * Controls for attributes that can be set on the cookies.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.CookieConfigs cookie_configs = 21;
   */
  cookieConfigs?: CookieConfigs;

  /**
   * Optional additional prefix to use when emitting statistics.
   *
   * @generated from field: string stat_prefix = 22;
   */
  statPrefix: string;

  /**
   * Optional expiration time for the CSRF protection token cookie.
   * The CSRF token prevents cross-site request forgery attacks during the OAuth2 flow.
   * If not specified, defaults to ``600s`` (10 minutes), which should provide sufficient time
   * for users to complete the OAuth2 authorization flow.
   *
   * @generated from field: google.protobuf.Duration csrf_token_expires_in = 24;
   */
  csrfTokenExpiresIn?: Duration;

  /**
   * Optional expiration time for the code verifier cookie.
   * The code verifier is stored in a secure, HTTP-only cookie during the OAuth2 authorization process.
   * If not specified, defaults to ``600s`` (10 minutes), which should provide sufficient time
   * for users to complete the OAuth2 authorization flow.
   *
   * @generated from field: google.protobuf.Duration code_verifier_token_expires_in = 25;
   */
  codeVerifierTokenExpiresIn?: Duration;

  /**
   * Disable token encryption. When set to true, both the access token and the ID token will be stored in plain text.
   * This option should only be used in secure environments where token encryption is not required.
   * Default is false (tokens are encrypted).
   *
   * @generated from field: bool disable_token_encryption = 26;
   */
  disableTokenEncryption: boolean;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.OAuth2Config.
 * Use `create(OAuth2ConfigSchema)` to create a new message.
 */
export declare const OAuth2ConfigSchema: GenMessage<OAuth2Config>;

/**
 * @generated from enum envoy.extensions.filters.http.oauth2.v3.OAuth2Config.AuthType
 */
export enum OAuth2Config_AuthType {
  /**
   * The ``client_id`` and ``client_secret`` will be sent in the URL encoded request body.
   * This type should only be used when Auth server does not support Basic authentication.
   *
   * @generated from enum value: URL_ENCODED_BODY = 0;
   */
  URL_ENCODED_BODY = 0,

  /**
   * The ``client_id`` and ``client_secret`` will be sent using HTTP Basic authentication scheme.
   *
   * @generated from enum value: BASIC_AUTH = 1;
   */
  BASIC_AUTH = 1,
}

/**
 * Describes the enum envoy.extensions.filters.http.oauth2.v3.OAuth2Config.AuthType.
 */
export declare const OAuth2Config_AuthTypeSchema: GenEnum<OAuth2Config_AuthType>;

/**
 * Filter config.
 *
 * @generated from message envoy.extensions.filters.http.oauth2.v3.OAuth2
 */
export declare type OAuth2 = Message<"envoy.extensions.filters.http.oauth2.v3.OAuth2"> & {
  /**
   * Leave this empty to disable OAuth2 for a specific route, using per filter config.
   *
   * @generated from field: envoy.extensions.filters.http.oauth2.v3.OAuth2Config config = 1;
   */
  config?: OAuth2Config;
};

/**
 * Describes the message envoy.extensions.filters.http.oauth2.v3.OAuth2.
 * Use `create(OAuth2Schema)` to create a new message.
 */
export declare const OAuth2Schema: GenMessage<OAuth2>;

