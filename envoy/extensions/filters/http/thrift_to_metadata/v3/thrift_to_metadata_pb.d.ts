// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto (package envoy.extensions.filters.http.thrift_to_metadata.v3, syntax proto3)
/* eslint-disable */

import type { GenEnum, GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { Value } from "@bufbuild/protobuf/wkt";
import type { ProtocolType, TransportType } from "../../../network/thrift_proxy/v3/thrift_proxy_pb";

/**
 * Describes the file envoy/extensions/filters/http/thrift_to_metadata/v3/thrift_to_metadata.proto.
 */
export declare const file_envoy_extensions_filters_http_thrift_to_metadata_v3_thrift_to_metadata: GenFile;

/**
 * @generated from message envoy.extensions.filters.http.thrift_to_metadata.v3.KeyValuePair
 */
export declare type KeyValuePair = Message<"envoy.extensions.filters.http.thrift_to_metadata.v3.KeyValuePair"> & {
  /**
   * The namespace â€” if this is empty, the filter's namespace will be used.
   *
   * @generated from field: string metadata_namespace = 1;
   */
  metadataNamespace: string;

  /**
   * The key to use within the namespace.
   *
   * @generated from field: string key = 2;
   */
  key: string;

  /**
   * When used for on_present case, if value is non-empty it'll be used instead
   * of the field value.
   *
   * When used for on_missing case, a non-empty value must be provided.
   *
   * @generated from field: google.protobuf.Value value = 3;
   */
  value?: Value;
};

/**
 * Describes the message envoy.extensions.filters.http.thrift_to_metadata.v3.KeyValuePair.
 * Use `create(KeyValuePairSchema)` to create a new message.
 */
export declare const KeyValuePairSchema: GenMessage<KeyValuePair>;

/**
 * @generated from message envoy.extensions.filters.http.thrift_to_metadata.v3.FieldSelector
 */
export declare type FieldSelector = Message<"envoy.extensions.filters.http.thrift_to_metadata.v3.FieldSelector"> & {
  /**
   * field name to log
   *
   * @generated from field: string name = 1;
   */
  name: string;

  /**
   * field id to match
   *
   * @generated from field: int32 id = 2;
   */
  id: number;

  /**
   * next node of the field selector
   *
   * @generated from field: envoy.extensions.filters.http.thrift_to_metadata.v3.FieldSelector child = 3;
   */
  child?: FieldSelector;
};

/**
 * Describes the message envoy.extensions.filters.http.thrift_to_metadata.v3.FieldSelector.
 * Use `create(FieldSelectorSchema)` to create a new message.
 */
export declare const FieldSelectorSchema: GenMessage<FieldSelector>;

/**
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.http.thrift_to_metadata.v3.Rule
 */
export declare type Rule = Message<"envoy.extensions.filters.http.thrift_to_metadata.v3.Rule"> & {
  /**
   * The field to match on.
   * :ref:`field_selector<envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.Rule.field_selector>`
   * takes precedence if both are set.
   *
   * @generated from field: envoy.extensions.filters.http.thrift_to_metadata.v3.Field field = 1;
   */
  field: Field;

  /**
   * Specifies that a match will be performed on the value of a field in the thrift body.
   * If set, the whole http body will be buffered to extract the field value, which
   * may have performance implications.
   *
   * It's a thrift over http version of
   * :ref:`field_selector<envoy_v3_api_field_extensions.filters.network.thrift_proxy.filters.payload_to_metadata.v3.PayloadToMetadata.Rule.field_selector>`.
   *
   * See also `payload-to-metadata <https://www.envoyproxy.io/docs/envoy/latest/configuration/other_protocols/thrift_filters/payload_to_metadata_filter>`_
   * for more reference.
   *
   * Example:
   *
   * .. code-block:: yaml
   *
   *    method_name: foo
   *    field_selector:
   *      name: info
   *      id: 2
   *      child:
   *        name: version
   *        id: 1
   *
   * The above yaml will match on value of ``info.version`` in the below thrift schema as input of
   * :ref:`on_present<envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.Rule.on_present>` or
   * :ref:`on_missing<envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.Rule.on_missing>`
   * while we are processing ``foo`` method. This rule won't be applied to ``bar`` method.
   *
   * .. code-block:: thrift
   *
   *    struct Info {
   *      1: required string version;
   *    }
   *    service Server {
   *      bool foo(1: i32 id, 2: Info info);
   *      bool bar(1: i32 id, 2: Info info);
   *    }
   *
   *
   * @generated from field: envoy.extensions.filters.http.thrift_to_metadata.v3.FieldSelector field_selector = 2;
   */
  fieldSelector?: FieldSelector;

  /**
   * If specified, :ref:`field_selector<envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.Rule.field_selector>`
   * will be used to extract the field value *only* on the thrift message with method name.
   *
   * @generated from field: string method_name = 3;
   */
  methodName: string;

  /**
   * The key-value pair to set in the *filter metadata* if the field is present
   * in *thrift metadata*.
   *
   * If the value in the KeyValuePair is non-empty, it'll be used instead
   * of field value.
   *
   * @generated from field: envoy.extensions.filters.http.thrift_to_metadata.v3.KeyValuePair on_present = 4;
   */
  onPresent?: KeyValuePair;

  /**
   * The key-value pair to set in the *filter metadata* if the field is missing
   * in *thrift metadata*.
   *
   * The value in the KeyValuePair must be set, since it'll be used in lieu
   * of the missing field value.
   *
   * @generated from field: envoy.extensions.filters.http.thrift_to_metadata.v3.KeyValuePair on_missing = 5;
   */
  onMissing?: KeyValuePair;
};

/**
 * Describes the message envoy.extensions.filters.http.thrift_to_metadata.v3.Rule.
 * Use `create(RuleSchema)` to create a new message.
 */
export declare const RuleSchema: GenMessage<Rule>;

/**
 * The configuration for transforming thrift metadata into filter metadata.
 *
 * [#next-free-field: 7]
 *
 * @generated from message envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadata
 */
export declare type ThriftToMetadata = Message<"envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadata"> & {
  /**
   * The list of rules to apply to http request body to extract thrift metadata.
   *
   * @generated from field: repeated envoy.extensions.filters.http.thrift_to_metadata.v3.Rule request_rules = 1;
   */
  requestRules: Rule[];

  /**
   * The list of rules to apply to http response body to extract thrift metadata.
   *
   * @generated from field: repeated envoy.extensions.filters.http.thrift_to_metadata.v3.Rule response_rules = 2;
   */
  responseRules: Rule[];

  /**
   * Supplies the type of transport that the Thrift proxy should use. Defaults to
   * :ref:`AUTO_TRANSPORT<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.TransportType.AUTO_TRANSPORT>`.
   *
   * @generated from field: envoy.extensions.filters.network.thrift_proxy.v3.TransportType transport = 3;
   */
  transport: TransportType;

  /**
   * Supplies the type of protocol that the Thrift proxy should use. Defaults to
   * :ref:`AUTO_PROTOCOL<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.ProtocolType.AUTO_PROTOCOL>`.
   * Note that :ref:`LAX_BINARY<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.ProtocolType.LAX_BINARY>`
   * is not distinguished by :ref:`AUTO_PROTOCOL<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.ProtocolType.AUTO_PROTOCOL>`,
   * which is the same with :ref:`thrift_proxy network filter <envoy_v3_api_msg_extensions.filters.network.thrift_proxy.v3.ThriftProxy>`.
   * Note that :ref:`TWITTER<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.ProtocolType.TWITTER>` is
   * not supported due to deprecation in envoy.
   *
   * @generated from field: envoy.extensions.filters.network.thrift_proxy.v3.ProtocolType protocol = 4;
   */
  protocol: ProtocolType;

  /**
   * Allowed content-type for thrift payload to filter metadata transformation.
   * Default to ``{"application/x-thrift"}``.
   *
   * Set ``allow_empty_content_type`` if empty/missing content-type header
   * is allowed.
   *
   * @generated from field: repeated string allow_content_types = 5;
   */
  allowContentTypes: string[];

  /**
   * Allowed empty content-type for thrift payload to filter metadata transformation.
   * Default to false.
   *
   * @generated from field: bool allow_empty_content_type = 6;
   */
  allowEmptyContentType: boolean;
};

/**
 * Describes the message envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadata.
 * Use `create(ThriftToMetadataSchema)` to create a new message.
 */
export declare const ThriftToMetadataSchema: GenMessage<ThriftToMetadata>;

/**
 * Thrift to metadata configuration on a per-route basis, which overrides the global configuration for
 * request rules and responses rules.
 *
 * @generated from message envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadataPerRoute
 */
export declare type ThriftToMetadataPerRoute = Message<"envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadataPerRoute"> & {
  /**
   * The list of rules to apply to http request body to extract thrift metadata.
   *
   * @generated from field: repeated envoy.extensions.filters.http.thrift_to_metadata.v3.Rule request_rules = 1;
   */
  requestRules: Rule[];

  /**
   * The list of rules to apply to http response body to extract thrift metadata.
   *
   * @generated from field: repeated envoy.extensions.filters.http.thrift_to_metadata.v3.Rule response_rules = 2;
   */
  responseRules: Rule[];
};

/**
 * Describes the message envoy.extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadataPerRoute.
 * Use `create(ThriftToMetadataPerRouteSchema)` to create a new message.
 */
export declare const ThriftToMetadataPerRouteSchema: GenMessage<ThriftToMetadataPerRoute>;

/**
 * @generated from enum envoy.extensions.filters.http.thrift_to_metadata.v3.Field
 */
export enum Field {
  /**
   * The Thrift method name, string value.
   *
   * @generated from enum value: METHOD_NAME = 0;
   */
  METHOD_NAME = 0,

  /**
   * The Thrift protocol name, string value. Values are "binary", "binary/non-strict", and "compact", with "(auto)" suffix if
   * :ref:`protocol <envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadata.protocol>`
   * is set to :ref:`AUTO_PROTOCOL<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.ProtocolType.AUTO_PROTOCOL>`
   *
   * @generated from enum value: PROTOCOL = 1;
   */
  PROTOCOL = 1,

  /**
   * The Thrift transport name, string value. Values are "framed", "header", and "unframed", with "(auto)" suffix if
   * :ref:`transport <envoy_v3_api_field_extensions.filters.http.thrift_to_metadata.v3.ThriftToMetadata.transport>`
   * is set to :ref:`AUTO_TRANSPORT<envoy_v3_api_enum_value_extensions.filters.network.thrift_proxy.v3.TransportType.AUTO_TRANSPORT>`
   *
   * @generated from enum value: TRANSPORT = 2;
   */
  TRANSPORT = 2,

  /**
   * The Thrift message type, singed 16-bit integer value.
   *
   * @generated from enum value: HEADER_FLAGS = 3;
   */
  HEADER_FLAGS = 3,

  /**
   * The Thrift sequence ID, singed 32-bit integer value.
   *
   * @generated from enum value: SEQUENCE_ID = 4;
   */
  SEQUENCE_ID = 4,

  /**
   * The Thrift message type, string value. Values in request are "call" and "oneway", and in response are "reply" and "exception".
   *
   * @generated from enum value: MESSAGE_TYPE = 5;
   */
  MESSAGE_TYPE = 5,

  /**
   * The Thrift reply type, string value. This is only valid for response rules. Values are "success" and "error".
   *
   * @generated from enum value: REPLY_TYPE = 6;
   */
  REPLY_TYPE = 6,
}

/**
 * Describes the enum envoy.extensions.filters.http.thrift_to_metadata.v3.Field.
 */
export declare const FieldSchema: GenEnum<Field>;

