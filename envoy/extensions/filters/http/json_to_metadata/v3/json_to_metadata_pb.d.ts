// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/http/json_to_metadata/v3/json_to_metadata.proto (package envoy.extensions.filters.http.json_to_metadata.v3, syntax proto3)
/* eslint-disable */

import type { GenEnum, GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { Value } from "@bufbuild/protobuf/wkt";
import type { RegexMatcher } from "../../../../../type/matcher/v3/regex_pb";

/**
 * Describes the file envoy/extensions/filters/http/json_to_metadata/v3/json_to_metadata.proto.
 */
export declare const file_envoy_extensions_filters_http_json_to_metadata_v3_json_to_metadata: GenFile;

/**
 * @generated from message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata
 */
export declare type JsonToMetadata = Message<"envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata"> & {
  /**
   * At least one of request_rules and response_rules must be provided.
   * Rules to match json body of requests.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.MatchRules request_rules = 1;
   */
  requestRules?: JsonToMetadata_MatchRules;

  /**
   * Rules to match json body of responses.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.MatchRules response_rules = 2;
   */
  responseRules?: JsonToMetadata_MatchRules;
};

/**
 * Describes the message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.
 * Use `create(JsonToMetadataSchema)` to create a new message.
 */
export declare const JsonToMetadataSchema: GenMessage<JsonToMetadata>;

/**
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair
 */
export declare type JsonToMetadata_KeyValuePair = Message<"envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair"> & {
  /**
   * The namespace — if this is empty, the filter's namespace will be used.
   *
   * @generated from field: string metadata_namespace = 1;
   */
  metadataNamespace: string;

  /**
   * The key to use within the namespace.
   *
   * @generated from field: string key = 2;
   */
  key: string;

  /**
   * @generated from oneof envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair.value_type
   */
  valueType: {
    /**
     * The value to pair with the given key.
     *
     * When used for on_present case, if value is non-empty it'll be used instead
     * of the the value of the JSON key. If both are empty, the the value of the
     * JSON key is used as-is.
     *
     * When used for on_missing/on_error case, a non-empty value
     * must be provided.
     *
     * It ignores ValueType, i.e., not type casting.
     *
     * @generated from field: google.protobuf.Value value = 3;
     */
    value: Value;
    case: "value";
  } | { case: undefined; value?: undefined };

  /**
   * The value's type — defaults to protobuf.Value.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.ValueType type = 4;
   */
  type: JsonToMetadata_ValueType;

  /**
   * False if we want to overwrite the existing metadata value. Default to false.
   *
   * @generated from field: bool preserve_existing_metadata_value = 5;
   */
  preserveExistingMetadataValue: boolean;
};

/**
 * Describes the message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair.
 * Use `create(JsonToMetadata_KeyValuePairSchema)` to create a new message.
 */
export declare const JsonToMetadata_KeyValuePairSchema: GenMessage<JsonToMetadata_KeyValuePair>;

/**
 * @generated from message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Selector
 */
export declare type JsonToMetadata_Selector = Message<"envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Selector"> & {
  /**
   * @generated from oneof envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Selector.selector
   */
  selector: {
    /**
     * key to match
     *
     * @generated from field: string key = 1;
     */
    value: string;
    case: "key";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Selector.
 * Use `create(JsonToMetadata_SelectorSchema)` to create a new message.
 */
export declare const JsonToMetadata_SelectorSchema: GenMessage<JsonToMetadata_Selector>;

/**
 * A Rule defines what metadata to apply when a key-value is present, missing in the json
 * or fail to parse the payload.
 *
 * @generated from message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Rule
 */
export declare type JsonToMetadata_Rule = Message<"envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Rule"> & {
  /**
   * Specifies that a match will be performed on the value of a property.
   * Here's an example to match on 1 in {"foo": {"bar": 1}, "bar": 2}
   *
   * selectors:
   * - key: foo
   * - key: bar
   *
   * @generated from field: repeated envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Selector selectors = 1;
   */
  selectors: JsonToMetadata_Selector[];

  /**
   * If the attribute is present, apply this metadata KeyValuePair.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair on_present = 2;
   */
  onPresent?: JsonToMetadata_KeyValuePair;

  /**
   * If the attribute is missing, apply this metadata KeyValuePair.
   *
   * The value in the KeyValuePair must be set.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair on_missing = 3;
   */
  onMissing?: JsonToMetadata_KeyValuePair;

  /**
   * If the body is too large or fail to parse or content-type is mismatched, apply this metadata KeyValuePair.
   *
   * The value in the KeyValuePair must be set.
   *
   * @generated from field: envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.KeyValuePair on_error = 4;
   */
  onError?: JsonToMetadata_KeyValuePair;
};

/**
 * Describes the message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Rule.
 * Use `create(JsonToMetadata_RuleSchema)` to create a new message.
 */
export declare const JsonToMetadata_RuleSchema: GenMessage<JsonToMetadata_Rule>;

/**
 * @generated from message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.MatchRules
 */
export declare type JsonToMetadata_MatchRules = Message<"envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.MatchRules"> & {
  /**
   * The list of rules to apply.
   *
   * @generated from field: repeated envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.Rule rules = 1;
   */
  rules: JsonToMetadata_Rule[];

  /**
   * Allowed content-type for json to metadata transformation.
   * Default to ``{"application/json"}``.
   *
   * Set ``allow_empty_content_type`` if empty/missing content-type header
   * is allowed.
   *
   * @generated from field: repeated string allow_content_types = 2;
   */
  allowContentTypes: string[];

  /**
   * Allowed empty content-type for json to metadata transformation.
   * Default to false.
   *
   * @generated from field: bool allow_empty_content_type = 3;
   */
  allowEmptyContentType: boolean;

  /**
   * Allowed content-type by regex match for json to metadata transformation.
   * This can be used in parallel with ``allow_content_types``.
   *
   * @generated from field: envoy.type.matcher.v3.RegexMatcher allow_content_types_regex = 4;
   */
  allowContentTypesRegex?: RegexMatcher;
};

/**
 * Describes the message envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.MatchRules.
 * Use `create(JsonToMetadata_MatchRulesSchema)` to create a new message.
 */
export declare const JsonToMetadata_MatchRulesSchema: GenMessage<JsonToMetadata_MatchRules>;

/**
 * @generated from enum envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.ValueType
 */
export enum JsonToMetadata_ValueType {
  /**
   * The value is a serialized `protobuf.Value
   * <https://github.com/protocolbuffers/protobuf/blob/master/src/google/protobuf/struct.proto#L62>`_.
   *
   * @generated from enum value: PROTOBUF_VALUE = 0;
   */
  PROTOBUF_VALUE = 0,

  /**
   * @generated from enum value: STRING = 1;
   */
  STRING = 1,

  /**
   * @generated from enum value: NUMBER = 2;
   */
  NUMBER = 2,
}

/**
 * Describes the enum envoy.extensions.filters.http.json_to_metadata.v3.JsonToMetadata.ValueType.
 */
export declare const JsonToMetadata_ValueTypeSchema: GenEnum<JsonToMetadata_ValueType>;

