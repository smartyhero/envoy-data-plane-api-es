// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/extensions/filters/udp/dns_filter/v3/dns_filter.proto (package envoy.extensions.filters.udp.dns_filter.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { DnsTable } from "../../../../../data/dns/v3/dns_table_pb";
import type { DataSource } from "../../../../../config/core/v3/base_pb";
import type { Duration } from "@bufbuild/protobuf/wkt";
import type { Address } from "../../../../../config/core/v3/address_pb";
import type { DnsResolutionConfig } from "../../../../../config/core/v3/resolver_pb";
import type { TypedExtensionConfig } from "../../../../../config/core/v3/extension_pb";

/**
 * Describes the file envoy/extensions/filters/udp/dns_filter/v3/dns_filter.proto.
 */
export declare const file_envoy_extensions_filters_udp_dns_filter_v3_dns_filter: GenFile;

/**
 * Configuration for the DNS filter.
 *
 * @generated from message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig
 */
export declare type DnsFilterConfig = Message<"envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig"> & {
  /**
   * The stat prefix used when emitting DNS filter statistics
   *
   * @generated from field: string stat_prefix = 1;
   */
  statPrefix: string;

  /**
   * Server context configuration contains the data that the filter uses to respond
   * to DNS requests.
   *
   * @generated from field: envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ServerContextConfig server_config = 2;
   */
  serverConfig?: DnsFilterConfig_ServerContextConfig;

  /**
   * Client context configuration controls Envoy's behavior when it must use external
   * resolvers to answer a query. This object is optional and if omitted instructs
   * the filter to resolve queries from the data in the server_config.
   * Also, if ``client_config`` is omitted, here is the Envoy's behavior to create DNS resolver:
   *
   * 1. If :ref:`typed_dns_resolver_config <envoy_v3_api_field_config.bootstrap.v3.Bootstrap.typed_dns_resolver_config>`
   * is not empty, uses it.
   *
   * 2. Otherwise, uses the default c-ares DNS resolver.
   *
   *
   * @generated from field: envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig client_config = 3;
   */
  clientConfig?: DnsFilterConfig_ClientContextConfig;
};

/**
 * Describes the message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.
 * Use `create(DnsFilterConfigSchema)` to create a new message.
 */
export declare const DnsFilterConfigSchema: GenMessage<DnsFilterConfig>;

/**
 * This message contains the configuration for the DNS Filter operating
 * in a server context. This message will contain the virtual hosts and
 * associated addresses with which Envoy will respond to queries
 *
 * @generated from message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ServerContextConfig
 */
export declare type DnsFilterConfig_ServerContextConfig = Message<"envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ServerContextConfig"> & {
  /**
   * @generated from oneof envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ServerContextConfig.config_source
   */
  configSource: {
    /**
     * Load the configuration specified from the control plane
     *
     * @generated from field: envoy.data.dns.v3.DnsTable inline_dns_table = 1;
     */
    value: DnsTable;
    case: "inlineDnsTable";
  } | {
    /**
     * Seed the filter configuration from an external path. This source
     * is a yaml formatted file that contains the DnsTable driving Envoy's
     * responses to DNS queries
     *
     * @generated from field: envoy.config.core.v3.DataSource external_dns_table = 2;
     */
    value: DataSource;
    case: "externalDnsTable";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ServerContextConfig.
 * Use `create(DnsFilterConfig_ServerContextConfigSchema)` to create a new message.
 */
export declare const DnsFilterConfig_ServerContextConfigSchema: GenMessage<DnsFilterConfig_ServerContextConfig>;

/**
 * This message contains the configuration for the DNS Filter operating
 * in a client context. This message will contain the timeouts, retry,
 * and forwarding configuration for Envoy to make DNS requests to other
 * resolvers
 *
 * [#next-free-field: 6]
 *
 * @generated from message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig
 */
export declare type DnsFilterConfig_ClientContextConfig = Message<"envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig"> & {
  /**
   * Sets the maximum time we will wait for the upstream query to complete
   * We allow 5s for the upstream resolution to complete, so the minimum
   * value here is 1. Note that the total latency for a failed query is the
   * number of retries multiplied by the resolver_timeout.
   *
   * @generated from field: google.protobuf.Duration resolver_timeout = 1;
   */
  resolverTimeout?: Duration;

  /**
   * This field was used for `dns_resolution_config` in Envoy 1.19.0 and
   * 1.19.1.
   * Control planes that need to set this field for Envoy 1.19.0 and
   * 1.19.1 clients should fork the protobufs and change the field type
   * to `DnsResolutionConfig`.
   * Control planes that need to simultaneously support Envoy 1.18.x and
   * Envoy 1.19.x should avoid Envoy 1.19.0 and 1.19.1.
   *
   * [#not-implemented-hide:]
   *
   * @generated from field: repeated envoy.config.core.v3.Address upstream_resolvers = 2 [deprecated = true];
   * @deprecated
   */
  upstreamResolvers: Address[];

  /**
   * DNS resolution configuration which includes the underlying dns resolver addresses and options.
   * This field is deprecated in favor of
   * :ref:`typed_dns_resolver_config <envoy_v3_api_field_extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig.typed_dns_resolver_config>`.
   *
   * @generated from field: envoy.config.core.v3.DnsResolutionConfig dns_resolution_config = 5 [deprecated = true];
   * @deprecated
   */
  dnsResolutionConfig?: DnsResolutionConfig;

  /**
   * DNS resolver type configuration extension. This extension can be used to configure c-ares, apple,
   * or any other DNS resolver types and the related parameters.
   * For example, an object of
   * :ref:`CaresDnsResolverConfig <envoy_v3_api_msg_extensions.network.dns_resolver.cares.v3.CaresDnsResolverConfig>`
   * can be packed into this ``typed_dns_resolver_config``. This configuration replaces the
   * :ref:`dns_resolution_config <envoy_v3_api_field_extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig.dns_resolution_config>`
   * configuration.
   * During the transition period when both ``dns_resolution_config`` and ``typed_dns_resolver_config`` exists,
   * when ``typed_dns_resolver_config`` is in place, Envoy will use it and ignore ``dns_resolution_config``.
   * When ``typed_dns_resolver_config`` is missing, the default behavior is in place.
   * [#extension-category: envoy.network.dns_resolver]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig typed_dns_resolver_config = 4;
   */
  typedDnsResolverConfig?: TypedExtensionConfig;

  /**
   * Controls how many outstanding external lookup contexts the filter tracks.
   * The context structure allows the filter to respond to every query even if the external
   * resolution times out or is otherwise unsuccessful
   *
   * @generated from field: uint64 max_pending_lookups = 3;
   */
  maxPendingLookups: bigint;
};

/**
 * Describes the message envoy.extensions.filters.udp.dns_filter.v3.DnsFilterConfig.ClientContextConfig.
 * Use `create(DnsFilterConfig_ClientContextConfigSchema)` to create a new message.
 */
export declare const DnsFilterConfig_ClientContextConfigSchema: GenMessage<DnsFilterConfig_ClientContextConfig>;

