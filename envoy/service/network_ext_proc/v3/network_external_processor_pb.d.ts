// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/service/network_ext_proc/v3/network_external_processor.proto (package envoy.service.network_ext_proc.v3, syntax proto3)
/* eslint-disable */

import type { GenEnum, GenFile, GenMessage, GenService } from "@bufbuild/protobuf/codegenv2";
import type { JsonObject, Message } from "@bufbuild/protobuf";
import type { Metadata } from "../../../config/core/v3/base_pb";

/**
 * Describes the file envoy/service/network_ext_proc/v3/network_external_processor.proto.
 */
export declare const file_envoy_service_network_ext_proc_v3_network_external_processor: GenFile;

/**
 * The payload data from network layer
 *
 * @generated from message envoy.service.network_ext_proc.v3.Data
 */
export declare type Data = Message<"envoy.service.network_ext_proc.v3.Data"> & {
  /**
   * The raw payload data
   *
   * @generated from field: bytes data = 1;
   */
  data: Uint8Array;

  /**
   * Indicates whether this is the last data frame in the current direction.
   * The external processor should still respond to this message even
   * if there is no more data expected in this direction.
   *
   * @generated from field: bool end_of_stream = 2;
   */
  endOfStream: boolean;
};

/**
 * Describes the message envoy.service.network_ext_proc.v3.Data.
 * Use `create(DataSchema)` to create a new message.
 */
export declare const DataSchema: GenMessage<Data>;

/**
 * ProcessingRequest contains data sent from Envoy to the external processing server.
 * Each request contains either read data (from client) or write data (to client)
 * along with optional metadata.
 *
 * @generated from message envoy.service.network_ext_proc.v3.ProcessingRequest
 */
export declare type ProcessingRequest = Message<"envoy.service.network_ext_proc.v3.ProcessingRequest"> & {
  /**
   * ReadData contains the network data intercepted in the request path (client to server).
   * This is sent to the external processor when data arrives from the downstream client.
   * If this is set, write_data should not be set.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.Data read_data = 1;
   */
  readData?: Data;

  /**
   * WriteData contains the network data intercepted in the response path (server to client).
   * This is sent to the external processor when data arrives from the upstream server.
   * If this is set, read_data should not be set.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.Data write_data = 2;
   */
  writeData?: Data;

  /**
   * Optional metadata associated with the request.
   * This can include connection properties, filter configuration, and any other
   * contextual information that might be useful for processing decisions.
   *
   * The metadata is not automatically propagated from request to response.
   * The external processor must include any needed metadata in its response.
   *
   * @generated from field: envoy.config.core.v3.Metadata metadata = 3;
   */
  metadata?: Metadata;
};

/**
 * Describes the message envoy.service.network_ext_proc.v3.ProcessingRequest.
 * Use `create(ProcessingRequestSchema)` to create a new message.
 */
export declare const ProcessingRequestSchema: GenMessage<ProcessingRequest>;

/**
 * ProcessingResponse contains the response from the external processing server to Envoy.
 * Each response corresponds to a ProcessingRequest and indicates how the network
 * traffic should be handled.
 * [#next-free-field: 6]
 *
 * @generated from message envoy.service.network_ext_proc.v3.ProcessingResponse
 */
export declare type ProcessingResponse = Message<"envoy.service.network_ext_proc.v3.ProcessingResponse"> & {
  /**
   * The processed ReadData containing potentially modified data for the request path.
   * This should be sent in response to a ProcessingRequest with read_data, and the
   * previous data in ProcessingRequest will be replaced by the new data in Envoy's data plane.
   * If this is set, write_data should not be set.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.Data read_data = 1;
   */
  readData?: Data;

  /**
   * The processed WriteData containing potentially modified data for the response path.
   * This should be sent in response to a ProcessingRequest with write_data, and the
   * previous data in ProcessingRequest will be replaced by the new data in Envoy's data plane.
   * If this is set, read_data should not be set.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.Data write_data = 2;
   */
  writeData?: Data;

  /**
   * Indicates whether the data was modified or not.
   * This is mandatory and tells Envoy whether to use the original or modified data.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.ProcessingResponse.DataProcessedStatus data_processing_status = 3;
   */
  dataProcessingStatus: ProcessingResponse_DataProcessedStatus;

  /**
   * Optional: Determines the connection behavior after processing.
   * If not specified, CONTINUE is assumed, and the connection proceeds normally.
   * Use CLOSE or CLOSE_RST to terminate the connection based on processing results.
   *
   * @generated from field: envoy.service.network_ext_proc.v3.ProcessingResponse.ConnectionStatus connection_status = 4;
   */
  connectionStatus: ProcessingResponse_ConnectionStatus;

  /**
   * Optional metadata associated with the request.
   * This can include connection properties, filter configuration, and any other
   * contextual information that might be useful for processing decisions.
   *
   * The metadata is not automatically propagated from request to response.
   * The external processor must include any needed metadata in its response.
   *
   * @generated from field: google.protobuf.Struct dynamic_metadata = 5;
   */
  dynamicMetadata?: JsonObject;
};

/**
 * Describes the message envoy.service.network_ext_proc.v3.ProcessingResponse.
 * Use `create(ProcessingResponseSchema)` to create a new message.
 */
export declare const ProcessingResponseSchema: GenMessage<ProcessingResponse>;

/**
 * DataProcessedStatus indicates whether the data was modified by the external processor.
 *
 * @generated from enum envoy.service.network_ext_proc.v3.ProcessingResponse.DataProcessedStatus
 */
export enum ProcessingResponse_DataProcessedStatus {
  /**
   * The data processed status is unknown.
   *
   * @generated from enum value: UNKNOWN = 0;
   */
  UNKNOWN = 0,

  /**
   * The data remains unchanged. Envoy will use the original data.
   * This is useful when the processor only wants to inspect but not modify the traffic.
   *
   * @generated from enum value: UNMODIFIED = 1;
   */
  UNMODIFIED = 1,

  /**
   * The data has been modified. Envoy will use the modified data provided in the response.
   * This allows the processor to transform the network traffic as needed.
   *
   * @generated from enum value: MODIFIED = 2;
   */
  MODIFIED = 2,
}

/**
 * Describes the enum envoy.service.network_ext_proc.v3.ProcessingResponse.DataProcessedStatus.
 */
export declare const ProcessingResponse_DataProcessedStatusSchema: GenEnum<ProcessingResponse_DataProcessedStatus>;

/**
 * ConnectionStatus determines what happens to the connection after processing.
 *
 * @generated from enum envoy.service.network_ext_proc.v3.ProcessingResponse.ConnectionStatus
 */
export enum ProcessingResponse_ConnectionStatus {
  /**
   * Continue normal processing of the connection.
   * This is the default behavior and allows traffic to flow normally.
   *
   * @generated from enum value: CONTINUE = 0;
   */
  CONTINUE = 0,

  /**
   * Close the connection with normal TCP FIN.
   * This allows for clean connection termination with a normal close sequence.
   * Any buffered data will be sent before closing.
   *
   * @generated from enum value: CLOSE = 1;
   */
  CLOSE = 1,

  /**
   * Immediately reset the connection with TCP RST.
   * This forcibly terminates the connection without a clean shutdown,
   * discarding any buffered data. Use this for security-critical situations
   * or when immediate termination is required.
   *
   * @generated from enum value: CLOSE_RST = 2;
   */
  CLOSE_RST = 2,
}

/**
 * Describes the enum envoy.service.network_ext_proc.v3.ProcessingResponse.ConnectionStatus.
 */
export declare const ProcessingResponse_ConnectionStatusSchema: GenEnum<ProcessingResponse_ConnectionStatus>;

/**
 * NetworkExternalProcessor service defines the contract between Envoy and
 * external processing servers for L4 network traffic.
 *
 * @generated from service envoy.service.network_ext_proc.v3.NetworkExternalProcessor
 */
export declare const NetworkExternalProcessor: GenService<{
  /**
   * Process establishes a bidirectional stream between Envoy and the external
   * processing server. Envoy sends ProcessingRequests containing network data
   * and the server responds with ProcessingResponses containing processing
   * decisions and potentially modified data.
   *
   * The server should handle processing timeout properly to avoid blocking
   * network traffic for extended periods. Any uncaught exceptions will
   * be treated as errors and will terminate the stream.
   *
   * Implementation note: The server should process requests in the order
   * they are received to maintain proper sequencing of network traffic.
   *
   * @generated from rpc envoy.service.network_ext_proc.v3.NetworkExternalProcessor.Process
   */
  process: {
    methodKind: "bidi_streaming";
    input: typeof ProcessingRequestSchema;
    output: typeof ProcessingResponseSchema;
  },
}>;

