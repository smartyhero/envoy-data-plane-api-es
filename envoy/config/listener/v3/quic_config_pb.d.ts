// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/config/listener/v3/quic_config.proto (package envoy.config.listener.v3, syntax proto3)
/* eslint-disable */

import type { GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { QuicProtocolOptions as QuicProtocolOptions$1 } from "../../core/v3/protocol_pb";
import type { Duration } from "@bufbuild/protobuf/wkt";
import type { RuntimeFeatureFlag } from "../../core/v3/base_pb";
import type { TypedExtensionConfig } from "../../core/v3/extension_pb";
import type { SocketCmsgHeaders } from "../../core/v3/socket_cmsg_headers_pb";

/**
 * Describes the file envoy/config/listener/v3/quic_config.proto.
 */
export declare const file_envoy_config_listener_v3_quic_config: GenFile;

/**
 * Configuration specific to the UDP QUIC listener.
 * [#next-free-field: 14]
 *
 * @generated from message envoy.config.listener.v3.QuicProtocolOptions
 */
export declare type QuicProtocolOptions = Message<"envoy.config.listener.v3.QuicProtocolOptions"> & {
  /**
   * @generated from field: envoy.config.core.v3.QuicProtocolOptions quic_protocol_options = 1;
   */
  quicProtocolOptions?: QuicProtocolOptions$1;

  /**
   * Maximum number of milliseconds that connection will be alive when there is
   * no network activity.
   *
   * If it is less than 1ms, Envoy will use 1ms. 300000ms if not specified.
   *
   * @generated from field: google.protobuf.Duration idle_timeout = 2;
   */
  idleTimeout?: Duration;

  /**
   * Connection timeout in milliseconds before the crypto handshake is finished.
   *
   * If it is less than 5000ms, Envoy will use 5000ms. 20000ms if not specified.
   *
   * @generated from field: google.protobuf.Duration crypto_handshake_timeout = 3;
   */
  cryptoHandshakeTimeout?: Duration;

  /**
   * Runtime flag that controls whether the listener is enabled or not. If not specified, defaults
   * to enabled.
   *
   * @generated from field: envoy.config.core.v3.RuntimeFeatureFlag enabled = 4;
   */
  enabled?: RuntimeFeatureFlag;

  /**
   * A multiplier to number of connections which is used to determine how many packets to read per
   * event loop. A reasonable number should allow the listener to process enough payload but not
   * starve TCP and other UDP sockets and also prevent long event loop duration.
   * The default value is 32. This means if there are N QUIC connections, the total number of
   * packets to read in each read event will be 32 * N.
   * The actual number of packets to read in total by the UDP listener is also
   * bound by 6000, regardless of this field or how many connections there are.
   *
   * @generated from field: google.protobuf.UInt32Value packets_to_read_to_connection_count_ratio = 5;
   */
  packetsToReadToConnectionCountRatio?: number;

  /**
   * Configure which implementation of ``quic::QuicCryptoClientStreamBase`` to be used for this listener.
   * If not specified the :ref:`QUICHE default one configured by <envoy_v3_api_msg_extensions.quic.crypto_stream.v3.CryptoServerStreamConfig>` will be used.
   * [#extension-category: envoy.quic.server.crypto_stream]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig crypto_stream_config = 6;
   */
  cryptoStreamConfig?: TypedExtensionConfig;

  /**
   * Configure which implementation of ``quic::ProofSource`` to be used for this listener.
   * If not specified the :ref:`default one configured by <envoy_v3_api_msg_extensions.quic.proof_source.v3.ProofSourceConfig>` will be used.
   * [#extension-category: envoy.quic.proof_source]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig proof_source_config = 7;
   */
  proofSourceConfig?: TypedExtensionConfig;

  /**
   * Config which implementation of ``quic::ConnectionIdGeneratorInterface`` to be used for this listener.
   * If not specified the :ref:`default one configured by <envoy_v3_api_msg_extensions.quic.connection_id_generator.v3.DeterministicConnectionIdGeneratorConfig>` will be used.
   * [#extension-category: envoy.quic.connection_id_generator]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig connection_id_generator_config = 8;
   */
  connectionIdGeneratorConfig?: TypedExtensionConfig;

  /**
   * Configure the server's preferred address to advertise so that client can migrate to it. See :ref:`example <envoy_v3_api_msg_extensions.quic.server_preferred_address.v3.FixedServerPreferredAddressConfig>` which configures a pair of v4 and v6 preferred addresses.
   * The current QUICHE implementation will advertise only one of the preferred IPv4 and IPv6 addresses based on the address family the client initially connects with.
   * If not specified, Envoy will not advertise any server's preferred address.
   * [#extension-category: envoy.quic.server_preferred_address]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig server_preferred_address_config = 9;
   */
  serverPreferredAddressConfig?: TypedExtensionConfig;

  /**
   * Configure the server to send transport parameter `disable_active_migration <https://www.rfc-editor.org/rfc/rfc9000#section-18.2-4.30.1>`_.
   * Defaults to false (do not send this transport parameter).
   *
   * @generated from field: google.protobuf.BoolValue send_disable_active_migration = 10;
   */
  sendDisableActiveMigration?: boolean;

  /**
   * Configure which implementation of ``quic::QuicConnectionDebugVisitor`` to be used for this listener.
   * If not specified, no debug visitor will be attached to connections.
   * [#extension-category: envoy.quic.connection_debug_visitor]
   *
   * @generated from field: envoy.config.core.v3.TypedExtensionConfig connection_debug_visitor_config = 11;
   */
  connectionDebugVisitorConfig?: TypedExtensionConfig;

  /**
   * Configure a type of UDP cmsg to pass to listener filters via QuicReceivedPacket.
   * Both level and type must be specified for cmsg to be saved.
   * Cmsg may be truncated or omitted if expected size is not set.
   * If not specified, no cmsg will be saved to QuicReceivedPacket.
   *
   * @generated from field: repeated envoy.config.core.v3.SocketCmsgHeaders save_cmsg_config = 12;
   */
  saveCmsgConfig: SocketCmsgHeaders[];

  /**
   * If true, the listener will reject connection-establishing packets at the
   * QUIC layer by replying with an empty version negotiation packet to the
   * client.
   *
   * @generated from field: bool reject_new_connections = 13;
   */
  rejectNewConnections: boolean;
};

/**
 * Describes the message envoy.config.listener.v3.QuicProtocolOptions.
 * Use `create(QuicProtocolOptionsSchema)` to create a new message.
 */
export declare const QuicProtocolOptionsSchema: GenMessage<QuicProtocolOptions>;

