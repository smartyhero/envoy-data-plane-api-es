// @generated by protoc-gen-es v2.10.0
// @generated from file envoy/config/overload/v3/overload.proto (package envoy.config.overload.v3, syntax proto3)
/* eslint-disable */

import type { GenEnum, GenFile, GenMessage } from "@bufbuild/protobuf/codegenv2";
import type { Message } from "@bufbuild/protobuf";
import type { Any, Duration } from "@bufbuild/protobuf/wkt";
import type { Percent } from "../../../type/v3/percent_pb";

/**
 * Describes the file envoy/config/overload/v3/overload.proto.
 */
export declare const file_envoy_config_overload_v3_overload: GenFile;

/**
 * @generated from message envoy.config.overload.v3.ResourceMonitor
 */
export declare type ResourceMonitor = Message<"envoy.config.overload.v3.ResourceMonitor"> & {
  /**
   * The name of the resource monitor to instantiate. Must match a registered
   * resource monitor type.
   * See the :ref:`extensions listed in typed_config below <extension_category_envoy.resource_monitors>` for the default list of available resource monitor.
   *
   * @generated from field: string name = 1;
   */
  name: string;

  /**
   * Configuration for the resource monitor being instantiated.
   * [#extension-category: envoy.resource_monitors]
   *
   * @generated from oneof envoy.config.overload.v3.ResourceMonitor.config_type
   */
  configType: {
    /**
     * @generated from field: google.protobuf.Any typed_config = 3;
     */
    value: Any;
    case: "typedConfig";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.config.overload.v3.ResourceMonitor.
 * Use `create(ResourceMonitorSchema)` to create a new message.
 */
export declare const ResourceMonitorSchema: GenMessage<ResourceMonitor>;

/**
 * @generated from message envoy.config.overload.v3.ThresholdTrigger
 */
export declare type ThresholdTrigger = Message<"envoy.config.overload.v3.ThresholdTrigger"> & {
  /**
   * If the resource pressure is greater than or equal to this value, the trigger
   * will enter saturation.
   *
   * @generated from field: double value = 1;
   */
  value: number;
};

/**
 * Describes the message envoy.config.overload.v3.ThresholdTrigger.
 * Use `create(ThresholdTriggerSchema)` to create a new message.
 */
export declare const ThresholdTriggerSchema: GenMessage<ThresholdTrigger>;

/**
 * @generated from message envoy.config.overload.v3.ScaledTrigger
 */
export declare type ScaledTrigger = Message<"envoy.config.overload.v3.ScaledTrigger"> & {
  /**
   * If the resource pressure is greater than this value, the trigger will be in the
   * :ref:`scaling <arch_overview_overload_manager-triggers-state>` state with value
   * ``(pressure - scaling_threshold) / (saturation_threshold - scaling_threshold)``.
   *
   * @generated from field: double scaling_threshold = 1;
   */
  scalingThreshold: number;

  /**
   * If the resource pressure is greater than this value, the trigger will enter saturation.
   *
   * @generated from field: double saturation_threshold = 2;
   */
  saturationThreshold: number;
};

/**
 * Describes the message envoy.config.overload.v3.ScaledTrigger.
 * Use `create(ScaledTriggerSchema)` to create a new message.
 */
export declare const ScaledTriggerSchema: GenMessage<ScaledTrigger>;

/**
 * @generated from message envoy.config.overload.v3.Trigger
 */
export declare type Trigger = Message<"envoy.config.overload.v3.Trigger"> & {
  /**
   * The name of the resource this is a trigger for.
   *
   * @generated from field: string name = 1;
   */
  name: string;

  /**
   * @generated from oneof envoy.config.overload.v3.Trigger.trigger_oneof
   */
  triggerOneof: {
    /**
     * @generated from field: envoy.config.overload.v3.ThresholdTrigger threshold = 2;
     */
    value: ThresholdTrigger;
    case: "threshold";
  } | {
    /**
     * @generated from field: envoy.config.overload.v3.ScaledTrigger scaled = 3;
     */
    value: ScaledTrigger;
    case: "scaled";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.config.overload.v3.Trigger.
 * Use `create(TriggerSchema)` to create a new message.
 */
export declare const TriggerSchema: GenMessage<Trigger>;

/**
 * Typed configuration for the "envoy.overload_actions.reduce_timeouts" action. See
 * :ref:`the docs <config_overload_manager_reducing_timeouts>` for an example of how to configure
 * the action with different timeouts and minimum values.
 *
 * @generated from message envoy.config.overload.v3.ScaleTimersOverloadActionConfig
 */
export declare type ScaleTimersOverloadActionConfig = Message<"envoy.config.overload.v3.ScaleTimersOverloadActionConfig"> & {
  /**
   * A set of timer scaling rules to be applied.
   *
   * @generated from field: repeated envoy.config.overload.v3.ScaleTimersOverloadActionConfig.ScaleTimer timer_scale_factors = 1;
   */
  timerScaleFactors: ScaleTimersOverloadActionConfig_ScaleTimer[];
};

/**
 * Describes the message envoy.config.overload.v3.ScaleTimersOverloadActionConfig.
 * Use `create(ScaleTimersOverloadActionConfigSchema)` to create a new message.
 */
export declare const ScaleTimersOverloadActionConfigSchema: GenMessage<ScaleTimersOverloadActionConfig>;

/**
 * @generated from message envoy.config.overload.v3.ScaleTimersOverloadActionConfig.ScaleTimer
 */
export declare type ScaleTimersOverloadActionConfig_ScaleTimer = Message<"envoy.config.overload.v3.ScaleTimersOverloadActionConfig.ScaleTimer"> & {
  /**
   * The type of timer this minimum applies to.
   *
   * @generated from field: envoy.config.overload.v3.ScaleTimersOverloadActionConfig.TimerType timer = 1;
   */
  timer: ScaleTimersOverloadActionConfig_TimerType;

  /**
   * @generated from oneof envoy.config.overload.v3.ScaleTimersOverloadActionConfig.ScaleTimer.overload_adjust
   */
  overloadAdjust: {
    /**
     * Sets the minimum duration as an absolute value.
     *
     * @generated from field: google.protobuf.Duration min_timeout = 2;
     */
    value: Duration;
    case: "minTimeout";
  } | {
    /**
     * Sets the minimum duration as a percentage of the maximum value.
     *
     * @generated from field: envoy.type.v3.Percent min_scale = 3;
     */
    value: Percent;
    case: "minScale";
  } | { case: undefined; value?: undefined };
};

/**
 * Describes the message envoy.config.overload.v3.ScaleTimersOverloadActionConfig.ScaleTimer.
 * Use `create(ScaleTimersOverloadActionConfig_ScaleTimerSchema)` to create a new message.
 */
export declare const ScaleTimersOverloadActionConfig_ScaleTimerSchema: GenMessage<ScaleTimersOverloadActionConfig_ScaleTimer>;

/**
 * @generated from enum envoy.config.overload.v3.ScaleTimersOverloadActionConfig.TimerType
 */
export enum ScaleTimersOverloadActionConfig_TimerType {
  /**
   * Unsupported value; users must explicitly specify the timer they want scaled.
   *
   * @generated from enum value: UNSPECIFIED = 0;
   */
  UNSPECIFIED = 0,

  /**
   * Adjusts the idle timer for downstream HTTP connections that takes effect when there are no active streams.
   * This affects the value of :ref:`HttpConnectionManager.common_http_protocol_options.idle_timeout
   * <envoy_v3_api_field_config.core.v3.HttpProtocolOptions.idle_timeout>`
   *
   * @generated from enum value: HTTP_DOWNSTREAM_CONNECTION_IDLE = 1;
   */
  HTTP_DOWNSTREAM_CONNECTION_IDLE = 1,

  /**
   * Adjusts the idle timer for HTTP streams initiated by downstream clients.
   * This affects the value of :ref:`RouteAction.idle_timeout <envoy_v3_api_field_config.route.v3.RouteAction.idle_timeout>` and
   * :ref:`HttpConnectionManager.stream_idle_timeout
   * <envoy_v3_api_field_extensions.filters.network.http_connection_manager.v3.HttpConnectionManager.stream_idle_timeout>`
   *
   * @generated from enum value: HTTP_DOWNSTREAM_STREAM_IDLE = 2;
   */
  HTTP_DOWNSTREAM_STREAM_IDLE = 2,

  /**
   * Adjusts the timer for how long downstream clients have to finish transport-level negotiations
   * before the connection is closed.
   * This affects the value of
   * :ref:`FilterChain.transport_socket_connect_timeout <envoy_v3_api_field_config.listener.v3.FilterChain.transport_socket_connect_timeout>`.
   *
   * @generated from enum value: TRANSPORT_SOCKET_CONNECT = 3;
   */
  TRANSPORT_SOCKET_CONNECT = 3,

  /**
   * Adjusts the max connection duration timer for downstream HTTP connections.
   * This affects the value of
   * :ref:`HttpConnectionManager.common_http_protocol_options.max_connection_duration
   * <envoy_v3_api_field_config.core.v3.HttpProtocolOptions.max_connection_duration>`.
   *
   * @generated from enum value: HTTP_DOWNSTREAM_CONNECTION_MAX = 4;
   */
  HTTP_DOWNSTREAM_CONNECTION_MAX = 4,

  /**
   * Adjusts the timeout for the downstream codec to flush an ended stream.
   * This affects the value of :ref:`RouteAction.flush_timeout
   * <envoy_v3_api_field_config.route.v3.RouteAction.flush_timeout>` and
   * :ref:`HttpConnectionManager.stream_flush_timeout
   * <envoy_v3_api_field_extensions.filters.network.http_connection_manager.v3.HttpConnectionManager.stream_flush_timeout>`
   *
   * @generated from enum value: HTTP_DOWNSTREAM_STREAM_FLUSH = 5;
   */
  HTTP_DOWNSTREAM_STREAM_FLUSH = 5,
}

/**
 * Describes the enum envoy.config.overload.v3.ScaleTimersOverloadActionConfig.TimerType.
 */
export declare const ScaleTimersOverloadActionConfig_TimerTypeSchema: GenEnum<ScaleTimersOverloadActionConfig_TimerType>;

/**
 * @generated from message envoy.config.overload.v3.OverloadAction
 */
export declare type OverloadAction = Message<"envoy.config.overload.v3.OverloadAction"> & {
  /**
   * The name of the overload action. This is just a well-known string that
   * listeners can use for registering callbacks.
   * Valid known overload actions include:
   * - envoy.overload_actions.stop_accepting_requests
   * - envoy.overload_actions.disable_http_keepalive
   * - envoy.overload_actions.stop_accepting_connections
   * - envoy.overload_actions.reject_incoming_connections
   * - envoy.overload_actions.shrink_heap
   * - envoy.overload_actions.reduce_timeouts
   * - envoy.overload_actions.reset_high_memory_stream
   *
   * @generated from field: string name = 1;
   */
  name: string;

  /**
   * A set of triggers for this action. The state of the action is the maximum
   * state of all triggers, which can be scalar values between 0 and 1 or
   * saturated. Listeners are notified when the overload action changes state.
   * An overload manager action can only have one trigger for a given resource
   * e.g. :ref:`Trigger.name
   * <envoy_v3_api_field_config.overload.v3.Trigger.name>` must be unique
   * in this list.
   *
   * @generated from field: repeated envoy.config.overload.v3.Trigger triggers = 2;
   */
  triggers: Trigger[];

  /**
   * Configuration for the action being instantiated if applicable.
   *
   * @generated from field: google.protobuf.Any typed_config = 3;
   */
  typedConfig?: Any;
};

/**
 * Describes the message envoy.config.overload.v3.OverloadAction.
 * Use `create(OverloadActionSchema)` to create a new message.
 */
export declare const OverloadActionSchema: GenMessage<OverloadAction>;

/**
 * A point within the connection or request lifecycle that provides context on
 * whether to shed load at that given stage for the current entity at the
 * point.
 *
 * @generated from message envoy.config.overload.v3.LoadShedPoint
 */
export declare type LoadShedPoint = Message<"envoy.config.overload.v3.LoadShedPoint"> & {
  /**
   * This is just a well-known string for the LoadShedPoint.
   * Deployment specific LoadShedPoints e.g. within a custom extension should
   * be prefixed by the company / deployment name to avoid colliding with any
   * open source LoadShedPoints.
   *
   * @generated from field: string name = 1;
   */
  name: string;

  /**
   * A set of triggers for this LoadShedPoint. The LoadShedPoint will use the
   * the maximum state of all triggers, which can be scalar values between 0 and
   * 1 or saturated. A LoadShedPoint can only have one trigger for a given
   * resource e.g. :ref:`Trigger.name
   * <envoy_v3_api_field_config.overload.v3.Trigger.name>` must be unique in
   * this list.
   *
   * @generated from field: repeated envoy.config.overload.v3.Trigger triggers = 2;
   */
  triggers: Trigger[];
};

/**
 * Describes the message envoy.config.overload.v3.LoadShedPoint.
 * Use `create(LoadShedPointSchema)` to create a new message.
 */
export declare const LoadShedPointSchema: GenMessage<LoadShedPoint>;

/**
 * Configuration for which accounts the WatermarkBuffer Factories should
 * track.
 *
 * @generated from message envoy.config.overload.v3.BufferFactoryConfig
 */
export declare type BufferFactoryConfig = Message<"envoy.config.overload.v3.BufferFactoryConfig"> & {
  /**
   * The minimum power of two at which Envoy starts tracking an account.
   *
   * Envoy has 8 power of two buckets starting with the provided exponent below.
   * Concretely the 1st bucket contains accounts for streams that use
   * [2^minimum_account_to_track_power_of_two,
   * 2^(minimum_account_to_track_power_of_two + 1)) bytes.
   * With the 8th bucket tracking accounts
   * >= 128 * 2^minimum_account_to_track_power_of_two.
   *
   * The maximum value is 56, since we're using uint64_t for bytes counting,
   * and that's the last value that would use the 8 buckets. In practice,
   * we don't expect the proxy to be holding 2^56 bytes.
   *
   * If omitted, Envoy should not do any tracking.
   *
   * @generated from field: uint32 minimum_account_to_track_power_of_two = 1;
   */
  minimumAccountToTrackPowerOfTwo: number;
};

/**
 * Describes the message envoy.config.overload.v3.BufferFactoryConfig.
 * Use `create(BufferFactoryConfigSchema)` to create a new message.
 */
export declare const BufferFactoryConfigSchema: GenMessage<BufferFactoryConfig>;

/**
 * [#next-free-field: 6]
 *
 * @generated from message envoy.config.overload.v3.OverloadManager
 */
export declare type OverloadManager = Message<"envoy.config.overload.v3.OverloadManager"> & {
  /**
   * The interval for refreshing resource usage.
   *
   * @generated from field: google.protobuf.Duration refresh_interval = 1;
   */
  refreshInterval?: Duration;

  /**
   * The set of resources to monitor.
   *
   * @generated from field: repeated envoy.config.overload.v3.ResourceMonitor resource_monitors = 2;
   */
  resourceMonitors: ResourceMonitor[];

  /**
   * The set of overload actions.
   *
   * @generated from field: repeated envoy.config.overload.v3.OverloadAction actions = 3;
   */
  actions: OverloadAction[];

  /**
   * The set of load shed points.
   *
   * @generated from field: repeated envoy.config.overload.v3.LoadShedPoint loadshed_points = 5;
   */
  loadshedPoints: LoadShedPoint[];

  /**
   * Configuration for buffer factory.
   *
   * @generated from field: envoy.config.overload.v3.BufferFactoryConfig buffer_factory_config = 4;
   */
  bufferFactoryConfig?: BufferFactoryConfig;
};

/**
 * Describes the message envoy.config.overload.v3.OverloadManager.
 * Use `create(OverloadManagerSchema)` to create a new message.
 */
export declare const OverloadManagerSchema: GenMessage<OverloadManager>;

